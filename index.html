<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جمعية مثاني القرآنية - الرئيسية</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Database Configuration and Service -->
    <script src="db-config.js"></script>
    <script src="database-service.js"></script>
    <style>
        @font-face {
            font-family: 'IBMPlexSansArabic';
            src: url('font/IBMPlexSansArabic-Regular.woff2') format('woff2'),
                 url('font/IBMPlexSansArabic-Regular.woff') format('woff'),
                 url('font/IBMPlexSansArabic-Regular.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'IBMPlexSansArabic';
            src: url('font/IBMPlexSansArabic-Medium.woff2') format('woff2'),
                 url('font/IBMPlexSansArabic-Medium.woff') format('woff'),
                 url('font/IBMPlexSansArabic-Medium.ttf') format('truetype');
            font-weight: 500;
            font-style: normal;
            font-display: swap;
        }
        
        body {
            font-family: 'IBMPlexSansArabic', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 500;
            direction: rtl;
            background-image: url('assets/background.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        
        /* Use medium weight for most UI elements */
        .dropdown-content, nav, button, .font-medium, h1, h2, h3, h4, h5, h6 {
            font-weight: 500;
        }
        html {
            scroll-behavior: smooth;
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .counter {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
        }
        
        .ticker {
            overflow: hidden;
            white-space: nowrap;
            animation: scroll-rtl 30s linear infinite;
        }
        
        @keyframes scroll-rtl {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .partner-scroll {
            animation: partnerScroll-rtl 15s linear infinite;
        }
        
        @keyframes partnerScroll-rtl {
            0% { transform: translateX(0); }
            100% { transform: translateX(50%); }
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .partner-scroll {
                animation: partnerScroll-rtl 10s linear infinite;
            }
            
            /* Improve touch targets for mobile */
            button, a, .mobile-dropdown button {
                min-height: 44px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            }
            
            /* Mobile menu improvements */
            #mobile-menu-btn {
                min-width: 48px;
                min-height: 48px;
                display: flex;
                align-items: center;
                justify-content: center;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Mobile dropdown buttons */
            .mobile-dropdown button {
                padding: 1rem;
                width: 100%;
                text-align: right;
                transition: all 0.2s ease;
            }
            
            .mobile-dropdown button:active {
                background-color: rgba(0, 161, 125, 0.1);
                transform: scale(0.98);
            }
            
            /* Mobile menu links */
            .mobile-dropdown-content a, .mobile-menu-link {
                padding: 0.75rem 1rem;
                min-height: 44px;
                display: flex;
                align-items: center;
                transition: all 0.2s ease;
            }
            
            .mobile-dropdown-content a:active, .mobile-menu-link:active {
                background-color: rgba(0, 161, 125, 0.1);
                transform: scale(0.98);
            }
            
            /* Mobile text sizing */
            h1 { font-size: 2rem !important; }
            h2 { font-size: 1.75rem !important; }
            h3 { font-size: 1.25rem !important; }
            
            /* Mobile spacing */
            .py-16 { padding-top: 3rem !important; padding-bottom: 3rem !important; }
            .py-12 { padding-top: 2rem !important; padding-bottom: 2rem !important; }
            
            /* Mobile achievements grid - keep 2 columns */
            .achievements-grid { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
            
            /* Mobile counter sizing */
            .counter { font-size: 2rem !important; }
            
            /* Mobile icons */
            .text-4xl { font-size: 2.5rem !important; }
            
            /* Mobile news cards */
            /* Mobile hero carousel enhanced */
            .carousel-image { 
                object-fit: cover;
                object-position: center;
            }
            
            /* Mobile image responsive enhancements */
            .aspect-\[4\/3\] {
                aspect-ratio: 4/3 !important;
            }
            
            /* Extra responsive scaling for very small screens */
            @media (max-width: 360px) {
                .max-w-sm { max-width: calc(100vw - 3rem) !important; }
            }
            
            /* Mobile news cards */
            .md\\:grid-cols-3 { grid-template-columns: repeat(1, minmax(0, 1fr)) !important; }
            
            /* Mobile footer */
            .md\\:grid-cols-4 { grid-template-columns: repeat(1, minmax(0, 1fr)) !important; }
            
            /* Mobile header height */
            #hdr { height: 120px !important; }
            
            /* Mobile logo sizing */
            .w-16, .w-20 { width: 3rem !important; }
            .h-12, .h-15 { height: 2.5rem !important; }
            
            /* Mobile achievements background */
            .py-16.bg-black\/30 { background-color: #00a17d !important; }
        }
        
        /* Tablet optimizations */
        @media (min-width: 769px) and (max-width: 1024px) {
            .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .md\\:grid-cols-3 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .md\\:grid-cols-4 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }
        
        /* Extra small mobile */
        @media (max-width: 480px) {
            .px-4 { padding-left: 1rem !important; padding-right: 1rem !important; }
            
            h2 { font-size: 1.5rem !important; }
            .counter { font-size: 1.75rem !important; }
            .text-4xl { font-size: 2rem !important; }
            
            .curved-underline::after {
                width: min(150px, 60vw) !important;
                height: 3px !important;
                border-radius: 0 0 0 20px !important;
                max-width: calc(100vw - 3rem) !important;
            }
            
            #hdr { height: 100px !important; }
            
            /* Extra small mobile hero */
            .carousel-image { 
                object-fit: cover;
            }
            
            /* Mobile image scaling for small screens */
            .aspect-\[4\/3\] {
                aspect-ratio: 4/3 !important;
                max-width: calc(100vw - 2rem) !important;
            }
            
            /* Stack footer images vertically on very small screens */
            .footer-images { flex-direction: column !important; align-items: center !important; }
        }
        
        /* Landscape mobile optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            .aspect-\[4\/3\] {
                aspect-ratio: 16/9 !important;
                max-width: 400px !important;
            }
        }
        
        /* Ultra-wide screen adjustments */
        @media (max-width: 320px) {
            .aspect-\[4\/3\] {
                aspect-ratio: 1/1 !important;
                max-width: calc(100vw - 1.5rem) !important;
            }
        }
        
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .lightbox.active {
            display: flex;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background: white;
            min-width: 250px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            z-index: 1;
            border-radius: 8px;
            padding: 0.5rem 0;
            top: 100%;
            left: 0;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Hero carousel styles - New responsive approach */
        .hero-carousel {
            position: relative;
            width: 100%;
            max-width: 1920px;
            margin: 0 auto;
            overflow: hidden;
            display: block;
        }
        
        /* Responsive hero carousel - Clean flexible layout */
        
        /* Large screens */
        @media (min-width: 1200px) {
            .hero-carousel {
                max-width: 1920px;
            }
            .carousel-image {
                max-width: 1920px;
            }
        }
        
        /* Medium screens */
        @media (min-width: 768px) and (max-width: 1199px) {
            .hero-carousel {
                max-width: 100%;
            }
            .carousel-image {
                max-width: 1200px;
            }
        }
        
        /* Mobile */
        @media (max-width: 768px) {
            .hero-carousel {
                max-width: 100%;
            }
        }
        
        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            visibility: hidden;
        }
        
        .hero-slide.active {
            position: relative;
            opacity: 1;
            transform: translateX(0);
            z-index: 1;
            visibility: visible;
        }
        
        .carousel-image {
            width: 100%;
            height: auto;
            max-width: 1920px;
            display: block;
            object-fit: cover;
            object-position: center;
        }
        
        /* Enhanced responsive image handling */
        @media (max-width: 768px) {
            .carousel-image {
                /* Ensure smooth scaling on mobile */
                will-change: transform;
                object-fit: cover;
            }
        }
        
        /* Extra small mobile responsive */
        @media (max-width: 480px) {
            .carousel-image {
                /* Optimize for touch devices */
                -webkit-transform: translateZ(0);
                transform: translateZ(0);
                object-fit: contain;
            }
        }
        
        /* Ensure images scale properly on resize */
        @media (orientation: landscape) {
            .carousel-image {
                object-fit: cover;
            }
        }
        
        @media (orientation: portrait) and (max-width: 768px) {
            .carousel-image {
                object-fit: contain;
            }
        }
        
        /* Ensure controls scale with adaptive carousel */
        .carousel-arrow, .carousel-dots {
            /* Controls will scale proportionally with the carousel */
            position: absolute;
            z-index: 10;
        }
        

        
        .hero-slide.slide-out-left {
            transform: translateX(-100%);
            opacity: 0;
            visibility: hidden;
        }
        
        .hero-slide.slide-out-right {
            transform: translateX(100%);
            opacity: 0;
            visibility: hidden;
        }
        
        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }
        
        /* Interactive Carousel Controls */
        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            z-index: 10;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .carousel-arrow:hover {
            background: rgba(0, 161, 125, 0.8);
            transform: translateY(-50%) scale(1.1);
        }
        
        .carousel-arrow-prev {
            left: 20px;
        }
        
        .carousel-arrow-next {
            right: 20px;
        }
        
        .carousel-dots {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            z-index: 10;
            padding: 6px 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            /* Prevent container from stretching children */
            flex-wrap: nowrap;
            white-space: nowrap;
        }
        
        .carousel-dot {
            width: 12px;
            height: 12px;
            min-width: 12px;
            min-height: 12px;
            max-width: 12px;
            max-height: 12px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.5);
            background: transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
            flex-grow: 0;
            display: block;
            aspect-ratio: 1/1;
            box-sizing: border-box;
        }
        
        .carousel-dot.active {
            background: #00a17d;
            border-color: #00a17d;
        }
        
        .carousel-dot:hover {
            border-color: #00a17d;
            transform: scale(1.2);
        }
        
        /* Ensure dot scaling maintains circular shape */
        .carousel-dot.active,
        .carousel-dot:hover,
        .carousel-dot:active {
            /* Maintain aspect ratio during scaling */
            transform-origin: center;
        }
        
        /* Mobile responsive controls */
        @media (max-width: 768px) {
            .hero-carousel {
                max-width: 100%;
            }
            
            .carousel-image {
                max-width: 768px;
            }
            
            .carousel-arrow {
                width: 40px;
                height: 40px;
                font-size: 14px;
                backdrop-filter: blur(15px);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            }
            
            .carousel-arrow-prev {
                left: 12px;
            }
            
            .carousel-arrow-next {
                right: 12px;
            }
            
            .carousel-dots {
                bottom: 12px;
                gap: 8px;
                padding: 6px 12px;
                background: rgba(0, 0, 0, 0.4);
                border-radius: 15px;
                backdrop-filter: blur(10px);
                display: flex;
                align-items: center;
                justify-content: center;
                flex-wrap: nowrap;
                white-space: nowrap;
            }
            
            .carousel-dot {
                width: 10px;
                height: 10px;
                min-width: 10px;
                min-height: 10px;
                max-width: 10px;
                max-height: 10px;
                border-width: 2px;
                border-radius: 50%;
                transition: all 0.3s ease;
                flex-shrink: 0;
                flex-grow: 0;
                aspect-ratio: 1/1;
                box-sizing: border-box;
            }
            
            .carousel-dot.active {
                transform: scale(1.2);
            }
            
            /* Touch-friendly improvements */
            .carousel-arrow:active {
                transform: translateY(-50%) scale(0.95);
            }
            
            .carousel-dot:active {
                transform: scale(0.9);
            }
        }
        
        /* Extra small screens */
        @media (max-width: 480px) {
            .hero-carousel {
                max-width: 100%;
            }
            
            .carousel-image {
                max-width: 480px;
            }
            
            .carousel-arrow {
                width: 36px;
                height: 36px;
                font-size: 12px;
                backdrop-filter: blur(20px);
            }
            
            .carousel-arrow-prev {
                left: 8px;
            }
            
            .carousel-arrow-next {
                right: 8px;
            }
            
            .carousel-dots {
                bottom: 8px;
                gap: 6px;
                padding: 4px 8px;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-wrap: nowrap;
                white-space: nowrap;
            }
            
            .carousel-dot {
                width: 8px;
                height: 8px;
                min-width: 8px;
                min-height: 8px;
                max-width: 8px;
                max-height: 8px;
                border-width: 2px;
                border-radius: 50%;
                flex-shrink: 0;
                flex-grow: 0;
                aspect-ratio: 1/1;
                box-sizing: border-box;
            }
            
            .carousel-dot.active {
                transform: scale(1.3);
            }
        }
        
        /* Ultra responsive mobile layout */
        @media (max-width: 360px) {
            .hero-carousel {
                max-width: 100%;
            }
            
            .carousel-image {
                max-width: 360px;
            }
            
            .carousel-arrow {
                width: 32px;
                height: 32px;
                font-size: 10px;
            }
            
            .carousel-arrow-prev {
                left: 6px;
            }
            
            .carousel-arrow-next {
                right: 6px;
            }
            
            .carousel-dots {
                bottom: 6px;
                gap: 4px;
                padding: 3px 6px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-wrap: nowrap;
                white-space: nowrap;
            }
            
            .carousel-dot {
                width: 6px;
                height: 6px;
                min-width: 6px;
                min-height: 6px;
                max-width: 6px;
                max-height: 6px;
                border-width: 1px;
                border-radius: 50%;
                flex-shrink: 0;
                flex-grow: 0;
                aspect-ratio: 1/1;
                box-sizing: border-box;
            }
        }
        
        /* Pause animation indicator */
        .hero-carousel.paused .carousel-dots::after {
            content: "⏸";
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }
        
        /* Mobile navbar adjustments for bigger logo */
        @media (max-width: 768px) {
            #mobile-menu-btn {
                font-size: 1.25rem;
                padding: 0.5rem;
            }
        }
        
        @media (max-width: 480px) {
            #mobile-menu-btn {
                font-size: 1.125rem;
            }
        }
        
        /* Contact section styling */
        .phone-contact-card {
            transition: all 0.3s ease;
            min-width: 140px;
        }
        
        .phone-contact-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 161, 125, 0.15);
        }
        
        /* Mobile contact responsive */
        @media (max-width: 480px) {
            .mobile-phone-contact {
                padding: 0.25rem 0.5rem;
                border-radius: 0.375rem;
                background-color: rgba(0, 161, 125, 0.05);
            }
        }
        
        /* Contact buttons container responsive */
        @media (max-width: 1200px) {
            .phone-contact-card {
                min-width: 120px;
                padding: 0.375rem 0.5rem;
            }
        }
        
        /* Enhanced overlay for mobile readability */
        @media (max-width: 768px) {
            .hero-overlay {
                background: rgba(0, 0, 0, 0.6);
            }
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        /* RTL adjustments for dropdowns */
        .dropdown-content a {
            text-align: right;
            direction: rtl;
        }
        #hdr{
            height: 160px;
            display: flex;
            align-items: center;
            background-image: url('assets/hdr-background2.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6), 0 4px 15px rgba(0, 0, 0, 0.4);
        }
        #hdr::before {
            content: '';
            position: absolute;
            inset: 0;
            z-index: 0;
        }
        #hdr > * {
            position: relative;
            z-index: 1;
        }

        /* Curved underline design */
        .section-header-container {
            position: relative;
            text-align: center;
            margin-bottom: 40px;
            overflow: hidden;
        }

        .curved-underline {
            position: relative;
            display: inline-block;
            padding-bottom: 35px;
            margin-right: 0;
            margin-bottom: 0;
            max-width: 100%;
        }

        .section-subtitle {
            text-align: center;
            margin-top: 15px;
            margin-bottom: 20px;
            padding-right: 0;
            position: relative;
        }

        .curved-underline::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) translateY(-5px);
            width: min(300px, 80vw);
            height: 4px;
            background: #efb740;
            border-radius: 0 0 0 35px;
            max-width: 100%;
        }

        .curved-underline.green::after {
            background: #00a17d;
        }

        .curved-underline.brown::after {
            background: #00a17d;
        }

        .curved-underline.white::after {
            background: #ffffff;
        }

        .curved-underline.gold::after {
            background: #efb740;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .curved-underline::after {
                width: min(200px, 70vw);
                height: 3px;
                border-radius: 0 0 0 25px;
                max-width: calc(100vw - 2rem);
            }
            
            .section-header-container {
                padding: 0 1rem;
                box-sizing: border-box;
            }
        }

        .news-scroll {
            animation: newsScroll-rtl 20s linear infinite;
        }
        
        @keyframes newsScroll-rtl {
            0% { transform: translateX(0); }
            100% { transform: translateX(50%); }
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .news-scroll {
                animation: newsScroll-rtl 12s linear infinite;
            }
        }

        /* News ticker cards - consistent height */
        #homepage-news-ticker .bg-white {
            height: 400px !important;
            display: flex !important;
            flex-direction: column !important;
        }
        
        #homepage-news-ticker .bg-white img {
            height: 180px !important;
            object-fit: cover !important;
            flex-shrink: 0 !important;
        }
        
        #homepage-news-ticker .bg-white .p-6 {
            flex: 1 !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: space-between !important;
        }
        
        #homepage-news-ticker .bg-white .p-6 h3 {
            line-height: 1.4 !important;
            margin-bottom: 0.75rem !important;
            height: auto !important;
            min-height: 2.8rem !important;
        }
        
        #homepage-news-ticker .bg-white .p-6 p {
            line-height: 1.5 !important;
            margin-bottom: auto !important;
        }
        
        #homepage-news-ticker .bg-white .p-6 .flex {
            margin-top: auto !important;
            flex-shrink: 0 !important;
        }

        /* Mobile news ticker adjustments */
        @media (max-width: 768px) {
            #homepage-news-ticker .bg-white {
                height: 350px !important;
            }
            
            #homepage-news-ticker .bg-white img {
                height: 150px !important;
            }
        }

        /* News and Achievements Section Backgrounds */
        .news-bg {
          background-image: url('assets/achivements-bg.jpg');
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
        }

        @media (max-width: 768px) {
          .news-bg,
          .achievements-bg {
            background-image: url('assets/achivements-bg.jpg') !important;
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
          }
        }

        /* Desktop: White text on image background */
        .news-bg .section-subtitle {
            color: #fff !important;
        }

        @media (max-width: 768px) {
            .news-bg {
                background: #fff !important;
                background-image: none !important;
            }
            .news-bg h2 {
                color: #efb740 !important;
            }
            .news-bg .section-subtitle {
                color: #000 !important;
            }
            .news-bg .curved-underline.gold::after {
                background: #efb740 !important;
            }
        }
        #logo {
            cursor: pointer;}
    </style>
    <style>
        .hover-green:hover {
          color: #00a17d;
        }
      </style>
</head>
<body class="bg-gray-50">


    <header class="bg-white/90 backdrop-blur-md shadow-lg sticky top-0 z-50" role="navigation" aria-label="التنقل الرئيسي">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-3 md:py-8">
                <!-- Logo and Contact Section (Left side in RTL) -->
                <div class="flex items-center space-x-6 space-x-reverse mr-2 lg:mr-12">
                    <!-- Logo -->
                    <a href="index.html" class="w-16 h-12 sm:w-20 sm:h-16 md:w-32 md:h-28 lg:w-36 lg:h-32 flex items-center justify-center overflow-hidden cursor-pointer hover:opacity-90 transition-opacity" id="logo">
                        <img src="assets/logoTransparent.png" alt="مثاني القرآنية" class="w-full h-full object-contain rounded-lg shadow-md">
                    </a>
                    
                    <!-- Contact Buttons -->
                    <div class="hidden lg:flex flex-col space-y-2">
                        <!-- Phone Contact -->
                        <div class="flex items-center space-x-2 space-x-reverse bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-[#00a17d]/5 hover:border-[#00a17d]/20 transition-colors phone-contact-card">
                            <i class="fas fa-phone text-[#00a17d] text-sm"></i>
                            <div class="flex flex-col text-right">
                                <span class="text-xs font-medium text-[#00a17d]">اتصل بنا</span>
                                <a href="tel:+966112345678" class="text-xs text-gray-600 hover:text-[#00a17d] transition-colors">011 234 5678</a>
                            </div>
                        </div>
                        
                        <!-- Email Contact -->
                        <div class="flex items-center space-x-2 space-x-reverse bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-[#00a17d]/5 hover:border-[#00a17d]/20 transition-colors phone-contact-card">
                            <i class="fas fa-envelope text-[#00a17d] text-sm"></i>
                            <div class="flex flex-col text-right">
                                <span class="text-xs font-medium text-[#00a17d]">راسلنا</span>
                                <a href="mailto:info@mthani.org" class="text-xs text-gray-600 hover:text-[#00a17d] transition-colors">info@mthani.org</a>
                            </div>
                        </div>
                    </div>
                </div>

                            <nav class="hidden lg:flex items-center space-x-8 space-x-reverse ml-2 lg:ml-12">
                <a href="index.html" class="text-gray-700 hover:text-[#00a17d] font-medium">الرئيسية</a>
                    
                    <!-- عن الجمعية -->
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#00a17d] font-medium flex items-center" aria-expanded="false">
                            عن الجمعية <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="about-us.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-info-circle ml-2 text-[#00a17d]"></i>من نحن</a>
                            <a href="license-certificate.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-certificate ml-2 text-[#00a17d]"></i>شهاده الترخيص</a>
                            <a href="commercial-registry.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-file-contract ml-2 text-[#00a17d]"></i>السجل التجاري</a>
                            <a href="strategic-map.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-map ml-2 text-[#00a17d]"></i> الرقم الوطني الموحد</a>
                            <a href="general-assembly.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-users ml-2 text-[#00a17d]"></i>الجمعية العمومية</a>
                            <a href="board-of-directors.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-user-tie ml-2 text-[#00a17d]"></i>قرار التأسيس</a>
                            <a href="executive-management.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-briefcase ml-2 text-[#00a17d]"></i>الإدارة التنفيذية</a>
                            <a href="organizational-structure.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-sitemap ml-2 text-[#00a17d]"></i>الهيكل التنظيمي</a>
                            <a href="work-team.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-user-friends ml-2 text-[#00a17d]"></i>فريق العمل</a>
                        </div>
                    </div>
                    
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#00a17d] font-medium flex items-center" aria-expanded="false">
                            التقارير <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="annual-report-2024.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-file-alt ml-2 text-[#00a17d]"></i>التقرير السنوي لعام 2024</a>
                            <a href="annual-report-2025.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-file-alt ml-2 text-[#00a17d]"></i>التقرير السنوي لعام 2025</a>
                        </div>
                    </div>
                    
                    <!-- قياس الرضا -->
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#00a17d] font-medium flex items-center" aria-expanded="false">
                            قياس الرضا <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSfvr9rgaWuP5Wjg4nIOAVhKOLTE1v1_bR436x3Vjlp2K976Ow/viewform?usp=dialog" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-smile ml-2 text-[#00a17d]"></i> رضا المستفيدين</a>
                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSdEEmKmtfawyQLCqomJ0PDhkQXHUpmNBiGOp_KDuQR_1eKQiA/viewform?usp=dialog" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-user-check ml-2 text-[#00a17d]"></i> رضا أعضاء الجمعية العمومية</a>
                            <a href="https://docs.google.com/forms/d/e/1FAIpQLSdfPq3qmrv0BE5JPHHziVB2hiFpWKy0xe15FeEdjiCVUJJdYg/viewform?usp=dialog" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-id-badge ml-2 text-[#00a17d]"></i>رضا الموظفين </a>
                         
                        </div>
                    </div>
                    
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#00a17d] font-medium flex items-center" aria-expanded="false">
                            الحوكمة <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="governance-guides.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-book ml-2 text-[#00a17d]"></i>ادلة الحوكمة</a>
                            <a href="regulations-policies.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-gavel ml-2 text-[#00a17d]"></i>اللوائح والسياسات</a>
                            <a href="privacy-policy.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-shield-alt ml-2 text-[#00a17d]"></i>سياسة الخصوصية</a>
                        </div>
                    </div>
                    
                    <!-- تطوع معنا -->
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#00a17d] font-medium flex items-center" aria-expanded="false">
                            تطوع معنا  <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-hands-helping ml-2 text-[#00a17d]"></i>منصة العمل التطوعي</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-heart ml-2 text-[#00a17d]"></i>الفرص التطوعية</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-user-plus ml-2 text-[#00a17d]"></i>إنضم معنا</a>
                        </div>
                    </div>
                    

                </nav>
                
                <!-- Mobile Contact & Menu -->
                <div class="lg:hidden flex items-center space-x-2 space-x-reverse">
                    <!-- Mobile Phone Contact -->
                    <a href="tel:+966112345678" class="flex items-center space-x-1 space-x-reverse text-[#00a17d] hover:text-[#00c59e] transition-colors mobile-phone-contact">
                        <i class="fas fa-phone text-sm"></i>
                        <span class="text-xs font-medium">اتصل</span>
                    </a>
                    
                    <!-- Mobile Email Contact -->
                    <a href="mailto:info@mthani.org" class="flex items-center space-x-1 space-x-reverse text-[#00a17d] hover:text-[#00c59e] transition-colors mobile-phone-contact">
                        <i class="fas fa-envelope text-sm"></i>
                        <span class="text-xs font-medium">راسل</span>
                    </a>
                    
                    <!-- Mobile Menu Button -->
                    <button class="text-gray-700" id="mobile-menu-btn">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div class="md:hidden bg-white/90 backdrop-blur-md border-t hidden" id="mobile-menu">
                    <div class="px-4 py-6 space-y-2">
            <a href="index.html" class="block py-3 text-gray-700 hover:text-[#00a17d] font-medium mobile-menu-link"><i class="fas fa-home ml-2 text-[#00a17d]"></i>الرئيسية</a>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#00a17d] font-medium py-2">
                        عن الجمعية <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="about-us.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-info-circle ml-2 text-[#00a17d]"></i>من نحن</a>
                        <a href="license-certificate.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-certificate ml-2 text-[#00a17d]"></i>شهاده الترخيص</a>
                        <a href="commercial-registry.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-file-contract ml-2 text-[#00a17d]"></i>السجل التجاري</a>
                        <a href="strategic-map.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-map ml-2 text-[#00a17d]"></i>الرقم الوطني الموحد</a>
                        <a href="general-assembly.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-users ml-2 text-[#00a17d]"></i>الجمعية العمومية</a>
                        <a href="board-of-directors.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-user-tie ml-2 text-[#00a17d]"></i>قرار التأسيس</a>
                        <a href="executive-management.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-briefcase ml-2 text-[#00a17d]"></i>الإدارة التنفيذية</a>
                        <a href="organizational-structure.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-sitemap ml-2 text-[#00a17d]"></i>الهيكل التنظيمي</a>
                        <a href="work-team.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-user-friends ml-2 text-[#00a17d]"></i>فريق العمل</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#00a17d] font-medium py-2">
                        التقارير <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="annual-report-2024.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-file-alt ml-2 text-[#00a17d]"></i>التقرير السنوي لعام 2024</a>
                        <a href="annual-report-2025.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-file-alt ml-2 text-[#00a17d]"></i>التقرير السنوي لعام 2025</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#00a17d] font-medium py-2">
                        قياس الرضا <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSdEMUd-nJ1P8FpTBqtqaJ2RsqiorwTuudXCl0ukSXAnbegMJA/viewform?pli=1" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-smile ml-2 text-[#00a17d]"></i>رضا المستفيدين</a>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSe759mGe1Rp0o0ZjpxKRqQLGcYWGm4OvfdrqYbP8uUc1Ntntw/viewform" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-user-check ml-2 text-[#00a17d]"></i>رضا أعضاء الجمعية العمومية</a>
                        <a href="https://docs.google.com/forms/d/1QoFXDSWg-Cr2E0EUWlzKF2YQowWg3AS6kt_EeeRpiCQ/viewform?edit_requested=true" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-id-badge ml-2 text-[#00a17d]"></i>رضا الموظفين</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#00a17d] font-medium py-2">
                        الحوكمة <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="governance-guides.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-book ml-2 text-[#00a17d]"></i>ادلة الحوكمة</a>
                        <a href="regulations-policies.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-gavel ml-2 text-[#00a17d]"></i>اللوائح والسياسات</a>
                        <a href="privacy-policy.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-shield-alt ml-2 text-[#00a17d]"></i>سياسة الخصوصية</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#00a17d] font-medium py-2">
                        تطوع معنا <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-hands-helping ml-2 text-[#00a17d]"></i>منصة العمل التطوعي</a>
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-heart ml-2 text-[#00a17d]"></i>الفرص التطوعية</a>
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-user-plus ml-2 text-[#00a17d]"></i>إنضم معنا</a>
                    </div>
                </div>

            </div>
        </div>
    </header>

    
    <main>
        <section class="relative" id="home">
            <!-- Hero Carousel -->
            <div class="hero-carousel">
                
                <!-- Navigation Arrows -->
                <button class="carousel-arrow carousel-arrow-prev" id="prevSlide" aria-label="الشريحة السابقة">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="carousel-arrow carousel-arrow-next" id="nextSlide" aria-label="الشريحة التالية">
                    <i class="fas fa-chevron-right"></i>
                </button>
                
                <!-- Dot Indicators - Will be loaded dynamically from database -->
                <div class="carousel-dots">
                </div>
            </div>

            <div class="absolute inset-0 flex items-center justify-center hero-content pointer-events-none">
                <div class="max-w-7xl mx-auto px-4 text-center text-white">
                </div>
            </div>
        </section>

        <!-- News Ticker -->
        <section class="bg-[#00a17d] text-white py-3 news-bg" id="news" aria-live="polite">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex items-center">
                    <div class="flex-1 overflow-hidden">
                        <div class="ticker" id="news-ticker">
                            تسعى جمعية مثاني القرآنية إلى تعليم القرآن الكريم ونشر علومه، ورعاية حلقات التحفيظ، وتنمية القيم القرآنية في المجتمع من خلال برامج نوعية وأنشطة هادفة.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Media Center -->
        <section class="py-16 bg-white">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex flex-col md:flex-row-reverse items-center gap-10">
                    <div class="w-full md:w-1/2 flex justify-center mb-8 md:mb-0">
                        <img src="assets/heroImage.jpg" alt="مثاني القرآنية" class="rounded-tr-[40px] rounded-bl-[40px] sm:rounded-tr-[60px] sm:rounded-bl-[60px] md:rounded-tr-[80px] md:rounded-bl-[80px] shadow-2xl object-cover w-full max-w-xs sm:max-w-sm md:max-w-md h-56 sm:h-64 md:h-80">
                    </div>
                    <div class="w-full md:w-1/2 text-center md:text-right">
                        <h2 class="text-4xl font-bold text-[#efb740] mb-6 curved-underline gold">مثاني القرآنية</h2>
                        <p class="text-xl text-gray-700 mb-4">جمعية مثاني القرآنية تهدف إلى تعليم القرآن الكريم ونشر علومه، ورعاية حلقات التحفيظ، وتنمية القيم القرآنية في المجتمع من خلال برامج نوعية وأنشطة هادفة.</p>
                        <p class="text-lg text-gray-500">انضم إلينا في مسيرة العطاء القرآني وكن جزءًا من بناء جيل قرآني واعٍ ومتميز.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Achievements Counter -->
        <section class="py-16 bg-black/30 text-white achievements-bg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="fade-in">
                    <div class="section-header-container">
                        <h2 class="text-4xl font-bold text-[#fffff] curved-underline gold">إنجازاتنا</h2>
                        <p class="text-xl text-white section-subtitle">نعمل معاً لبناء مجتمع أفضل</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center achievements-grid">
                    <div class="fade-in">
                        <div class="mb-4">
                            <i class="fas fa-hands-helping text-[#efb740] text-4xl mb-2"></i>
                        </div>
                        <div class="counter" data-target="10"><span class="text-[#efb740] text-2xl ml-1">+</span>0</div>
                        <p class="text-white font-medium">مشروع تطوعي</p>
                    </div>
                    <div class="fade-in">
                        <div class="mb-4">
                            <i class="fas fa-users text-[#efb740] text-4xl mb-2"></i>
                        </div>
                        <div class="counter " data-target="5000"><span class="text-[#efb740] text-2xl ml-1">+</span>0</div>
                        <p class="text-white font-medium">مستفيد</p>
                    </div>
                    <div class="fade-in">
                        <div class="mb-4">
                            <i class="fas fa-calendar-alt text-[#efb740] text-4xl mb-2"></i>
                        </div>
                        <div class="counter" data-target="25"><span class="text-[#efb740] text-2xl ml-1">+</span>0</div>
                        <p class="text-white font-medium">برنامج مجتمعي</p>
                    </div>
                    <div class="fade-in">
                        <div class="mb-4">
                            <i class="fas fa-star text-[#efb740] text-4xl mb-2"></i>
                        </div>
                        <div class="counter" data-target="95">0<span class="text-[#efb740] text-2xl mr-1">%</span></div>
                        <p class="text-white font-medium">% معدل الرضا</p>
                    </div>
                </div>
            </div>
        </section>



        <!-- Recent News -->
        <section class="py-16 bg-[#00a17d] news-bg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="fade-in">
                    <div class="section-header-container">
                        <h2 class="text-4xl font-bold text-[#ffffff] curved-underline gold">آخر الأخبار</h2>
                        <p class="text-xl text-white section-subtitle">ابق على اطلاع بآخر أخبار وأنشطة جمعية مثاني القرآنية</p>
                    </div>
                </div>
                
                <div class="overflow-hidden">
                  <div id="homepage-news-ticker" class="flex items-center justify-center space-x-8 space-x-reverse news-scroll">
                  </div>
                </div>
                
                <div class="text-center mt-12">
                    <a href="news.html" class="bg-[#efb740] text-[#ffffff] px-8 py-3 rounded-lg font-bold hover:bg-[#00a17d] hover:text-[#efb740] transition-colors inline-flex items-center">
                        عرض جميع الأخبار
                        <i class="fas fa-arrow-left mr-2"></i>
                    </a>
                </div>
            </div>
        </section>

        <!-- Partners Carousel -->
        <section class="py-16 bg-white border-t">
            <div class="max-w-7xl mx-auto px-4">
                <div class="fade-in">
                    <div class="section-header-container">
                        <h2 class="text-4xl font-bold text-[#efb740] curved-underline gold">شركاؤنا</h2>
                        <p class="text-xl text-gray-600 section-subtitle">نعمل مع أفضل الشركات والمؤسسات لخدمة مجتمعنا</p>
                    </div>
                </div>
                
                <div class="overflow-hidden">
                    <div class="flex items-center justify-center space-x-8 space-x-reverse partner-scroll">
                        <div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 1" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 2" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 3" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 4" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 5" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 6" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 7" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 8" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 9" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 10" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 11" class="max-w-full max-h-full object-contain">
                        </div><div class="flex-shrink-0 w-32 h-24 flex items-center justify-center hover:scale-110 transition-transform">
                            <img src="assets/logoTransparent.png" alt="شريك 12" class="max-w-full max-h-full object-contain">
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-[#00a17d] text-white">
        <div class="max-w-7xl mx-auto px-4 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- About Section -->
                <div class="mb-8 md:mb-0 text-center md:text-right">
                    <div class="flex items-center space-x-3 space-x-reverse mb-6 justify-center md:justify-start">
                        <div class="w-10 h-10 bg-white/30 rounded-full flex items-center justify-center">
                            <i class="fas fa-book-quran text-white"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">جمعية مثاني القرآنية</h3>
                            <p class="text-sm text-white">القرآنية الخيرية</p>
                        </div>
                    </div>
                    <p class="text-white mb-6">جمعية مثاني القرآنية تهدف إلى تعليم القرآن الكريم ونشر علومه، ورعاية حلقات التحفيظ، وتنمية القيم القرآنية في المجتمع.</p>
                    <div class="flex space-x-4 space-x-reverse justify-center md:justify-start">
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-[#efb740] hover:text-white transition-colors">
                            <i class="fab fa-facebook text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-[#efb740] hover:text-white transition-colors">
                            <i class="fab fa-twitter text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-[#efb740] hover:text-white transition-colors">
                            <i class="fab fa-instagram text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-[#efb740] hover:text-white transition-colors">
                            <i class="fab fa-linkedin text-white"></i>
                        </a>
                    </div>
                </div>
                

                <div class="mb-8 md:mb-0 flex justify-center footer-images">
                   <img src="assets/unprofitableGrowth.png" alt="logo" class="w-full max-w-[200px] h-auto object-contain">
                </div>

                <div class="mb-8 md:mb-0 flex justify-center footer-images">
                    <img src="assets/Vision-2030.png" alt="logo" class="w-full max-w-[200px] h-auto object-contain">
                </div>
                
                <!-- Contact Info -->
                <div class="mb-8 md:mb-0 text-center md:text-right">
                    <h3 class="text-lg font-bold mb-6">معلومات الاتصال</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-map-marker-alt text-[#efb740] ml-3"></i>
                            <span class="text-white">المملكة العربية السعودية، جده، حي الورود</span>
                        </div>
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-phone text-[#efb740] ml-3"></i>
                            <a href="tel:+966546638312" class="text-white hover:text-[#efb740] transition-colors">546638312 (+966)</a>
                        </div>
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-envelope text-[#efb740] ml-3"></i>
                            <a href="mailto:mathani.quran@gmail.com" class="text-white hover:text-[#efb740] transition-colors">mathani.quran@gmail.com</a>
                        </div>
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-clock text-[#efb740] ml-3"></i>
                            <span class="text-white">الأحد - الخميس: 8:00 ص - 4:00 م</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        

        <div class="border-t border-white/20">
            <div class="max-w-7xl mx-auto px-4 py-6">
                <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-right">
                    <p class="text-white text-sm mb-4 md:mb-0">
                        &copy; 2025 جمعية مثاني القرآنية. جميع الحقوق محفوظة.
                    </p>
                    <div class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-6 md:space-x-reverse">
                        <a href="privacy-policy.html" class="text-white hover:text-[#efb740] text-sm transition-colors">سياسة الخصوصية</a>
                        <a href="#" class="text-white hover:text-[#efb740] text-sm transition-colors">تصميم وتطوير وكالة قارن لتطوير المواقع</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
        
        <!-- Scroll to Top Button -->
        <button id="scroll-to-top" class="fixed bottom-6 left-6 bg-blue-600 text-white w-12 h-12 rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 opacity-0 invisible">
            <i class="fas fa-arrow-up"></i>
        </button>
    </footer>

    <!-- Lightbox Modal -->
    <div class="lightbox" id="lightbox">
        <div class="relative max-w-4xl mx-4">
            <button class="absolute -top-10 right-0 text-white text-2xl hover:text-gray-300" id="close-lightbox">
                <i class="fas fa-times"></i>
            </button>
            <img id="lightbox-image" src="" alt="" class="max-w-full max-h-screen object-contain rounded-lg">
        </div>
    </div>

    <script>
// ========== SECURITY WARNING ========== 
// Removed console warnings for production

// ========== SECURITY UTILITIES ==========
function sanitizeHTML(str) {
    if (!str) return '';
    return str.replace(/[&<>"']/g, function(match) {
        return {
            '&': '&amp;',
            '<': '&lt;',
            '>': '&gt;',
            '"': '&quot;',
            "'": '&#39;'
        }[match];
    });
}

// ========== SITE MANAGEMENT & ERROR HANDLING ==========
// Site closure check
    function checkSiteClosure() {
        const isClosed = localStorage.getItem('mthani-site-closed') === 'true';
        if (isClosed && !window.location.pathname.includes('dashboard.html')) {
            // Site is closed for maintenance - could redirect to a maintenance page
            // For now, just return false to prevent normal operation
            console.warn('Site is in maintenance mode');
            return false;
        }
        return true;
    }

// Global error handler (only for critical errors)
window.onerror = function(message, source, lineno, colno, error) {
    console.error('JavaScript Error:', { message, source, lineno, colno, error });
    // Only redirect on critical errors, not minor ones
    if (message.includes('Script error') || message.includes('Network Error') || message.includes('Cannot read property')) {
        setTimeout(() => {
            window.location.href = 'error.html?code=js&msg=' + encodeURIComponent(message);
        }, 3000); // Increased delay to avoid false positives
    }
    return false;
};

// Unhandled promise rejection handler (only for critical rejections)
window.addEventListener('unhandledrejection', function(event) {
    console.error('Unhandled Promise Rejection:', event.reason);
    // Only redirect on critical promise rejections
    if (event.reason && (event.reason.toString().includes('Network') || event.reason.toString().includes('Failed to fetch'))) {
        setTimeout(() => {
            window.location.href = 'error.html?code=promise&msg=' + encodeURIComponent(event.reason);
        }, 3000);
    }
});

// DOM Content Loaded Event
document.addEventListener('DOMContentLoaded', function() {
    // Check site closure first
    if (!checkSiteClosure()) return;
    
    // ========== DROPDOWN MENU FUNCTIONALITY ==========
    const dropdowns = document.querySelectorAll('.dropdown');
    dropdowns.forEach(dropdown => {
        const button = dropdown.querySelector('button');
        const content = dropdown.querySelector('.dropdown-content');
        
        // Show dropdown on mouse enter
        dropdown.addEventListener('mouseenter', function() {
            // Close other dropdowns
            dropdowns.forEach(otherDropdown => {
                if (otherDropdown !== dropdown) {
                    otherDropdown.querySelector('.dropdown-content').style.display = 'none';
                    otherDropdown.querySelector('button').setAttribute('aria-expanded', 'false');
                }
            });
            
            // Show current dropdown
            content.style.display = 'block';
            button.setAttribute('aria-expanded', 'true');
        });
        
        // Hide dropdown on mouse leave
        dropdown.addEventListener('mouseleave', function() {
            content.style.display = 'none';
            button.setAttribute('aria-expanded', 'false');
        });
        
        // Handle keyboard navigation for accessibility
        button.addEventListener('click', function(e) {
            e.preventDefault();
        });
    });

    // ========== MOBILE MENU FUNCTIONALITY ==========
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
            const icon = mobileMenuBtn.querySelector('i');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
            
            // Reset all mobile dropdowns to hidden when opening menu
            if (!mobileMenu.classList.contains('hidden')) {
                const allMobileDropdowns = mobileMenu.querySelectorAll('.mobile-dropdown-content');
                allMobileDropdowns.forEach(dropdown => {
                    dropdown.classList.add('hidden');
                });
            }
        });
    }

    // ========== ANIMATED HERO CAROUSEL WITH AUTO-SLIDE ==========
    // Carousel with smooth animations, auto-slide, and manual navigation
            // Carousel initialized

    

    // ========== NEWS TICKER FUNCTIONALITY ==========
    const newsTicker = document.getElementById('news-ticker');
    if (newsTicker) {
        let tickerPosition = 0;
        const tickerSpeed = 1;

        function animateTicker() {
            tickerPosition -= tickerSpeed;
            if (tickerPosition <= -newsTicker.offsetWidth) {
                tickerPosition = newsTicker.parentElement.offsetWidth;
            }
            newsTicker.style.transform = `translateX(${tickerPosition}px)`;
            requestAnimationFrame(animateTicker);
        }

        animateTicker();
    }

    // ========== MEDIA TABS FUNCTIONALITY ==========
    const mediaTabs = document.querySelectorAll('.media-tab');
    const mediaContents = document.querySelectorAll('.media-content');

    mediaTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const targetTab = this.dataset.tab;
            
            // Update active tab
            mediaTabs.forEach(t => t.classList.remove('active', 'bg-white', 'text-[#432d17]'));
            this.classList.add('active', 'bg-white', 'text-[#432d17]');
            
            // Show/hide content
            mediaContents.forEach(content => {
                if (content.id === targetTab) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
        });
    });

    // ========== LIGHTBOX FUNCTIONALITY ==========
    const lightboxTriggers = document.querySelectorAll('.lightbox-trigger');
    let lightboxModal = null;

    function createLightbox(src, title) {
        // Remove existing lightbox if any
        if (lightboxModal) {
            lightboxModal.remove();
        }

        // Create lightbox modal
        lightboxModal = document.createElement('div');
        lightboxModal.className = 'fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4';
        lightboxModal.innerHTML = `
            <div class="relative max-w-4xl max-h-full">
                <img src="${src}" alt="${title}" class="max-w-full max-h-full object-contain">
                <button class="absolute top-4 right-4 text-white text-2xl hover:text-gray-300 lightbox-close">
                    <i class="fas fa-times"></i>
                </button>
                <div class="absolute bottom-4 left-4 text-white bg-black bg-opacity-50 px-4 py-2 rounded">
                    <h3 class="font-semibold">${title}</h3>
                </div>
            </div>
        `;

        document.body.appendChild(lightboxModal);

        // Close lightbox functionality
        const closeBtn = lightboxModal.querySelector('.lightbox-close');
        closeBtn.addEventListener('click', closeLightbox);
        
        lightboxModal.addEventListener('click', function(e) {
            if (e.target === lightboxModal) {
                closeLightbox();
            }
        });

        // ESC key to close
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeLightbox();
            }
        });
    }

    function closeLightbox() {
        if (lightboxModal) {
            lightboxModal.remove();
            lightboxModal = null;
        }
    }

    lightboxTriggers.forEach(trigger => {
        trigger.addEventListener('click', function() {
            const src = this.dataset.src;
            const title = this.querySelector('h3').textContent;
            createLightbox(src, title);
        });
    });

    //  COUNTER ANIMATION 
    const counters = document.querySelectorAll('.counter');
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const counter = entry.target;
                const target = parseInt(counter.dataset.target);
                let duration = Math.min(4000, Math.max(1200, target * 10)); 
                if (target > 10000) duration = Math.min(6000, target * 0.2); 
                const step = target / (duration / 16); // 60fps
                let current = 0;

                counter.style.transition = 'transform 0.3s cubic-bezier(.68,-0.55,.27,1.55), color 0.3s';
                counter.style.transform = 'scale(1.2)';
                counter.style.color = 'white';

                setTimeout(() => {
                    counter.style.transform = 'scale(1)';
                }, 300);

                const updateCounter = () => {
                    if (current < target) {
                        current += step;
                        const existingIcon = counter.querySelector('span');
                        const iconSymbol = target === 95 ? '%' : '+';
                        if (target === 95) {
                            counter.innerHTML = Math.floor(current).toLocaleString('en-US') + (existingIcon ? existingIcon.outerHTML : `<span class="text-[#efb740] text-2xl mr-1">${iconSymbol}</span>`);
                        } else {
                            counter.innerHTML = (existingIcon ? existingIcon.outerHTML : `<span class="text-[#efb740] text-2xl ml-1">${iconSymbol}</span>`) + Math.floor(current).toLocaleString('en-US');
                        }
                        if (target > 0 && Math.abs(current % (target / 5)) < step) {
                            counter.style.transform = 'scale(1.15)';
                            setTimeout(() => {
                                counter.style.transform = 'scale(1)';
                            }, 120);
                        }
                        requestAnimationFrame(updateCounter);
                    } else {
                        const existingIcon = counter.querySelector('span');
                        const iconSymbol = target === 95 ? '%' : '+';
                        if (target === 95) {
                            counter.innerHTML = target.toLocaleString('en-US') + (existingIcon ? existingIcon.outerHTML : `<span class="text-[#efb740] text-2xl mr-1">${iconSymbol}</span>`);
                        } else {
                            counter.innerHTML = (existingIcon ? existingIcon.outerHTML : `<span class="text-[#efb740] text-2xl ml-1">${iconSymbol}</span>`) + target.toLocaleString('en-US');
                        }
                        counter.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            counter.style.transform = 'scale(1)';
                        }, 200);
                    }
                };

                updateCounter();
                counterObserver.unobserve(counter);
            }
        });
    });

    counters.forEach(counter => {
        counterObserver.observe(counter);
    });

    // PARTNERS CAROUSEL
    const partnerScroll = document.querySelector('.partner-scroll');
    if (partnerScroll) {
        let scrollPosition = 0;
        const scrollSpeed = 1;

        function animatePartners() {
            scrollPosition -= scrollSpeed;
            if (scrollPosition <= -partnerScroll.scrollWidth / 2) {
                scrollPosition = 0;
            }
            partnerScroll.style.transform = `translateX(${scrollPosition}px)`;
            requestAnimationFrame(animatePartners);
        }

        animatePartners();
    }

    // FADE IN ANIMATION
    const fadeElements = document.querySelectorAll('.fade-in');
    const fadeObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Element is in view - animate in
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            } else {
                // Element is out of view - reset for next animation
                entry.target.style.opacity = '0';
                entry.target.style.transform = 'translateY(30px)';
            }
        });
    }, {
        threshold: 0.1
    });

    fadeElements.forEach(element => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(30px)';
        element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        fadeObserver.observe(element);
    });

    // SCROLL TO TOP FUNCTIONALITY 
    const scrollToTopBtn = document.createElement('button');
    scrollToTopBtn.className = 'fixed bottom-6 left-6 bg-[#00a17d] text-white w-12 h-12 rounded-full shadow-lg hover:bg-[#00a17d]/80 transition-all duration-300 z-50 scroll-to-top';
    scrollToTopBtn.innerHTML = '<i class="fas fa-chevron-up"></i>';
    scrollToTopBtn.style.display = 'none';
    document.body.appendChild(scrollToTopBtn);

    scrollToTopBtn.addEventListener('click', function() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
            scrollToTopBtn.style.display = 'flex';
            scrollToTopBtn.style.alignItems = 'center';
            scrollToTopBtn.style.justifyContent = 'center';
        } else {
            scrollToTopBtn.style.display = 'none';
        }
    });

    // ========== SMOOTH SCROLLING FOR ANCHOR LINKS ==========
    const anchorLinks = document.querySelectorAll('a[href^="#"]');
    anchorLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // ========== SERVICE CARDS INTERACTIONS ==========
    const serviceCards = document.querySelectorAll('.hero-content .grid > div, .grid.grid-cols-2.md\\:grid-cols-4.lg\\:grid-cols-6 > div');
    serviceCards.forEach(card => {
        card.addEventListener('click', function() {
            const serviceName = this.querySelector('h3').textContent;
            alert(`سيتم توجيهكم إلى صفحة ${serviceName} قريباً`);
        });
    });

    // ========== ACCESSIBILITY ENHANCEMENTS ==========
    
    // Keyboard navigation for dropdowns
    dropdowns.forEach(dropdown => {
        const button = dropdown.querySelector('button');
        const links = dropdown.querySelectorAll('a');
        
        button.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                this.click();
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                const content = dropdown.querySelector('.dropdown-content');
                if (content.style.display === 'block') {
                    const firstLink = content.querySelector('a');
                    if (firstLink) firstLink.focus();
                }
            }
        });

        links.forEach((link, index) => {
            link.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    const nextLink = links[index + 1];
                    if (nextLink) nextLink.focus();
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    const prevLink = links[index - 1];
                    if (prevLink) {
                        prevLink.focus();
                    } else {
                        button.focus();
                    }
                } else if (e.key === 'Escape') {
                    dropdown.querySelector('.dropdown-content').style.display = 'none';
                    button.setAttribute('aria-expanded', 'false');
                    button.focus();
                }
            });
        });
    });

    // ========== MOBILE MENU DROPDOWN FUNCTIONALITY ==========
    const mobileDropdowns = document.querySelectorAll('.mobile-dropdown');
    mobileDropdowns.forEach(drop => {
        const btn = drop.querySelector('button');
        const content = drop.querySelector('.mobile-dropdown-content');
        
        // Handle dropdown button click (show/hide dropdown within mobile menu)
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Close other dropdowns
            mobileDropdowns.forEach(other => {
                if (other !== drop) {
                    other.querySelector('.mobile-dropdown-content').classList.add('hidden');
                }
            });
            
            // Toggle current dropdown
            content.classList.toggle('hidden');
        });
        
        const dropdownLinks = content.querySelectorAll('a');
        dropdownLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                mobileMenu.classList.add('hidden');
                const icon = mobileMenuBtn.querySelector('i');
                icon.classList.add('fa-bars');
                icon.classList.remove('fa-times');
                
                mobileDropdowns.forEach(dropdown => {
                    dropdown.querySelector('.mobile-dropdown-content').classList.add('hidden');
                });
            });
        });
    });

    // ========== MOBILE MENU REGULAR LINKS ==========
    const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');
    mobileMenuLinks.forEach(link => {
        link.addEventListener('click', function() {
            // Close mobile menu when regular link is clicked
            mobileMenu.classList.add('hidden');
            const icon = mobileMenuBtn.querySelector('i');
            icon.classList.add('fa-bars');
            icon.classList.remove('fa-times');
        });
    });

    // ========== PERFORMANCE OPTIMIZATIONS ==========
    
    // Lazy loading for images (if supported)
    if ('IntersectionObserver' in window) {
        const lazyImages = document.querySelectorAll('img[data-src]');
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.classList.remove('lazy');
                    imageObserver.unobserve(img);
                }
            });
        });

        lazyImages.forEach(img => imageObserver.observe(img));
    }

    // ========== ERROR HANDLING ==========
    window.addEventListener('error', function(e) {
        console.error('JavaScript Error:', e.error);
        // Could send error to logging service here
    });

    // ========== INITIALIZATION COMPLETE ==========
    
    // Dispatch custom event to indicate site is ready
    const siteReadyEvent = new CustomEvent('siteReady', {
        detail: { message: 'الموقع جاهز للاستخدام' }
    });
    document.dispatchEvent(siteReadyEvent);
});

// ========== UTILITY FUNCTIONS ==========

// Function to format numbers in Arabic
function formatArabicNumber(number) {
    return number.toString().replace(/\d/g, function(d) {
        return '٠١٢٣٤٥٦٧٨٩'[d];
    });
}

// Function to handle RTL text direction
function handleRTL() {
    document.documentElement.setAttribute('dir', 'rtl');
    document.documentElement.setAttribute('lang', 'ar');
}

// Function to detect if user prefers reduced motion
function respectsReducedMotion() {
    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;
}

// Apply reduced motion preferences
if (respectsReducedMotion()) {
    const style = document.createElement('style');
    style.textContent = `
        *, *::before, *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    `;
    document.head.appendChild(style);
}

// Load 6 random news cards from database for homepage ticker
(async function() {
    const ticker = document.getElementById('homepage-news-ticker');
    if (!ticker) return;
    
    try {
        // Show loading state
        ticker.innerHTML = `
            <div class="bg-white rounded-lg shadow-lg p-6 text-center flex-shrink-0" style="min-width: 320px;">
                <i class="fas fa-spinner fa-spin text-gray-400 text-4xl mb-2"></i>
                <h3 class="text-lg font-bold text-gray-800 mb-2">جاري تحميل الأخبار...</h3>
            </div>
        `;
        
        const savedNews = await databaseService.getAllNews();
    
    if (savedNews.length === 0) {
        ticker.innerHTML = `
            <div class="bg-white rounded-lg shadow-lg p-6 text-center flex-shrink-0" style="min-width: 320px;">
                <i class="fas fa-newspaper text-gray-400 text-4xl mb-2"></i>
                <h3 class="text-lg font-bold text-gray-800 mb-2">لا توجد أخبار</h3>
                <p class="text-gray-600 text-sm">سيتم عرض الأخبار هنا عند إضافتها من لوحة التحكم</p>
            </div>
        `;
        return;
    }
    
    // Shuffle and pick 6
    const shuffled = [...savedNews];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    const selected = shuffled.slice(0, 6);
    
    // Format date function
    function formatDate(dateString) {
        const date = new Date(dateString);
        const months = ['يناير','فبراير','مارس','ابريل','مايو','يونيو','يوليو','اغسطس','سبتمبر','اكتوبر','نوفمبر','ديسمبر'];
        return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;
    }
    
    // Check if we should animate (more than 3 cards)
    const shouldAnimate = selected.length > 3;
    
    // Remove animation class if not needed
    const tickerContainer = ticker.parentElement;
    if (shouldAnimate) {
        ticker.classList.add('news-scroll');
        // Duplicate cards for smooth infinite scroll like partners
        const allCards = [...selected, ...selected];
        
        // Generate cards HTML
        ticker.innerHTML = allCards.map(newsItem => {
            const TEXT_LIMIT = 100; // Shorter limit for homepage cards
            const mainText = newsItem.mainText || '';
            const excerptText = mainText.length > TEXT_LIMIT ? mainText.substring(0, TEXT_LIMIT) + '...' : mainText;
            
            return `
                <article class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 flex-shrink-0" style="min-width: 320px; max-width: 340px;">
                    <img src="${newsItem.image}" alt="${newsItem.title}" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-2">${newsItem.title}</h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-3">${excerptText}</p>
                        <div class="text-xs text-gray-500">${formatDate(newsItem.date)}</div>
                    </div>
                </article>
            `;
        }).join('');
    } else {
        ticker.classList.remove('news-scroll');
        ticker.style.justifyContent = 'center';
        ticker.style.gap = '2rem';
        
        // Generate cards HTML without duplication
        ticker.innerHTML = selected.map(newsItem => {
            const TEXT_LIMIT = 100; // Shorter limit for homepage cards
            const mainText = newsItem.mainText || '';
            const excerptText = mainText.length > TEXT_LIMIT ? mainText.substring(0, TEXT_LIMIT) + '...' : mainText;
            
            return `
                <article class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 flex-shrink-0" style="min-width: 320px; max-width: 340px;">
                    <img src="${newsItem.image}" alt="${newsItem.title}" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-2 line-clamp-2">${newsItem.title}</h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-3">${excerptText}</p>
                        <div class="text-xs text-gray-500">${formatDate(newsItem.date)}</div>
                    </div>
                </article>
            `;
        }).join('');
    }
    } catch (error) {
        console.error('Error loading news for homepage:', error);
        ticker.innerHTML = `
            <div class="bg-white rounded-lg shadow-lg p-6 text-center flex-shrink-0" style="min-width: 320px;">
                <i class="fas fa-exclamation-triangle text-red-400 text-4xl mb-2"></i>
                <h3 class="text-lg font-bold text-red-800 mb-2">خطأ في تحميل الأخبار</h3>
                <p class="text-gray-600 text-sm">تعذر الاتصال بقاعدة البيانات</p>
            </div>
        `;
    }
})();

    // ========== SIMPLE CAROUSEL WITH DATABASE IMAGES (NO MOVEMENT) ==========
    async function loadCarouselFromDatabase() {
        try {
            const dbService = new DatabaseService();
            const images = await dbService.getAllCarouselImages();
            const activeImages = images.filter(img => img.is_active).sort((a, b) => a.sort_order - b.sort_order);
            
            const carousel = document.querySelector('.hero-carousel');
            const slidesContainer = carousel.querySelector('.hero-slide')?.parentNode || carousel;
            const dotsContainer = document.querySelector('.carousel-dots');
            
            // Clear existing slides and dots
            const existingSlides = carousel.querySelectorAll('.hero-slide');
            const existingDots = dotsContainer.querySelectorAll('.carousel-dot');
            existingSlides.forEach(slide => slide.remove());
            existingDots.forEach(dot => dot.remove());
            
            if (activeImages.length > 0) {
                // Create slides from database images
                activeImages.forEach((image, index) => {
                    const slide = document.createElement('div');
                    slide.className = `hero-slide ${index === 0 ? 'active' : ''}`;
                    slide.innerHTML = `<img src="${sanitizeHTML(image.image_url)}" alt="${sanitizeHTML(image.alt_text || 'صورة البطل')}" class="carousel-image">`;
                    carousel.insertBefore(slide, carousel.querySelector('.carousel-arrow'));
                    
                    const dot = document.createElement('button');
                    dot.className = `carousel-dot ${index === 0 ? 'active' : ''}`;
                    dot.setAttribute('data-slide', index);
                    dot.setAttribute('aria-label', `Slide ${index + 1}`);
                    dotsContainer.appendChild(dot);
                });
                // Images loaded successfully
            } else {
                // Fallback to default image if no active images in database
                const slide = document.createElement('div');
                slide.className = 'hero-slide active';
                slide.innerHTML = '<img src="assets/hdr-background.jpg" alt="صورة افتراضية" class="carousel-image">';
                carousel.insertBefore(slide, carousel.querySelector('.carousel-arrow'));
                
                const dot = document.createElement('button');
                dot.className = 'carousel-dot active';
                dot.setAttribute('data-slide', '0');
                dot.setAttribute('aria-label', 'Slide 1');
                dotsContainer.appendChild(dot);
                // Using default image
            }
            
            // Setup navigation after images are loaded
            setTimeout(() => {
                setupCarouselNavigation();
            }, 100); // Small delay to ensure DOM is updated
            
        } catch (error) {
            console.error('Error loading carousel images:', error);
            // Fallback: keep existing hardcoded images
        }
    }

    // Load images on page load
    loadCarouselFromDatabase();
    
    // ========== CAROUSEL NAVIGATION FUNCTIONS ==========
    let currentSlide = 0;
    let totalSlides = 0;
    let autoSlideInterval = null;
    let isAutoSliding = true;

    function showSlide(index, direction = 'next') {
        const slides = document.querySelectorAll('.hero-slide');
        const dots = document.querySelectorAll('.carousel-dot');
        
        if (slides.length === 0 || index === currentSlide) return;
        
        totalSlides = slides.length;
        const currentSlideElement = slides[currentSlide];
        const nextSlideElement = slides[index];
        
        // Force browser reflow to ensure consistent timing
        currentSlideElement?.offsetHeight;
        nextSlideElement?.offsetHeight;
        
        // Remove all transition classes and reset positions
        slides.forEach(slide => {
            slide.classList.remove('active', 'slide-out-left', 'slide-out-right');
        });
        
        // Set initial positions before transition
        if (direction === 'next') {
            // Next slide starts from the right
            nextSlideElement?.classList.add('slide-out-right');
        } else {
            // Next slide starts from the left  
            nextSlideElement?.classList.add('slide-out-left');
        }
        
        // Force reflow to ensure initial position is set
        nextSlideElement?.offsetHeight;
        
        // Small delay to ensure consistent transition timing
        setTimeout(() => {
            // Apply transitions based on direction
            if (direction === 'next') {
                currentSlideElement?.classList.add('slide-out-left');
                nextSlideElement?.classList.remove('slide-out-right');
                nextSlideElement?.classList.add('active');
            } else {
                currentSlideElement?.classList.add('slide-out-right');
                nextSlideElement?.classList.remove('slide-out-left');
                nextSlideElement?.classList.add('active');
            }
        }, 10); // Small delay for consistent timing
        
        // Update dots
        dots.forEach((dot, i) => {
            dot.classList.remove('active');
            if (i === index) {
                dot.classList.add('active');
            }
        });
        
        currentSlide = index;
    }

    function nextSlide() {
        const slides = document.querySelectorAll('.hero-slide');
        if (slides.length === 0) return;
        
        const next = (currentSlide + 1) % slides.length;
        showSlide(next, 'next');
    }

    function prevSlide() {
        const slides = document.querySelectorAll('.hero-slide');
        if (slides.length === 0) return;
        
        const prev = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(prev, 'prev');
    }

    // ========== AUTO-SLIDE FUNCTIONALITY ==========
    function startAutoSlide() {
        const slides = document.querySelectorAll('.hero-slide');
        if (slides.length <= 1) return;
        
        // Always clear existing interval first to prevent multiple timers
        if (autoSlideInterval) {
            clearInterval(autoSlideInterval);
            autoSlideInterval = null;
        }
        
        autoSlideInterval = setInterval(() => {
            if (isAutoSliding) {
                nextSlide();
            }
        }, 5000); // 5 seconds
        
        // Auto-slide active
    }

    function pauseAutoSlide() {
        isAutoSliding = false;
        if (autoSlideInterval) {
            clearInterval(autoSlideInterval);
            autoSlideInterval = null;
        }
    }

    function resumeAutoSlide() {
        if (!isAutoSliding) {
            isAutoSliding = true;
            startAutoSlide();
        }
    }

    function restartAutoSlide() {
        // Clear any existing timer first
        if (autoSlideInterval) {
            clearInterval(autoSlideInterval);
            autoSlideInterval = null;
        }
        // Reset state and start fresh
        isAutoSliding = true;
        startAutoSlide();
    }

    // ========== ARROW CLICK HANDLERS ==========
    function setupArrowHandlers() {
        const prevBtn = document.getElementById('prevSlide');
        const nextBtn = document.getElementById('nextSlide');
        
        // Left arrow goes to next slide (swipe right)
        prevBtn?.addEventListener('click', () => {
            nextSlide();
            restartAutoSlide(); // Reset timer on manual navigation
        });
        
        // Right arrow goes to previous slide (swipe left)  
        nextBtn?.addEventListener('click', () => {
            prevSlide();
            restartAutoSlide(); // Reset timer on manual navigation
        });
        
        // Arrow handlers active
    }

    // ========== DOT CLICK HANDLERS ==========
    function setupDotHandlers() {
        const dots = document.querySelectorAll('.carousel-dot');
        
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                const direction = index > currentSlide ? 'next' : 'prev';
                showSlide(index, direction);
                restartAutoSlide(); // Reset timer on manual navigation
            });
        });
        
        // Dot handlers active
    }

    // ========== HOVER HANDLERS ==========
    function setupHoverHandlers() {
        const carousel = document.querySelector('.hero-carousel');
        
        carousel?.addEventListener('mouseenter', () => {
            pauseAutoSlide();
        });
        
        carousel?.addEventListener('mouseleave', () => {
            resumeAutoSlide();
        });
        
        // Hover handlers active
    }

    // ========== TOUCH/SWIPE HANDLERS ==========
    function setupSwipeHandlers() {
        const carousel = document.querySelector('.hero-carousel');
        if (!carousel) return;
        
        let touchStartX = 0;
        let touchEndX = 0;
        let isDragging = false;
        let startTime = 0;
        let lastSwipeTime = 0; // Debounce rapid swipes
        
        // Touch events for mobile
        carousel.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
            startTime = Date.now();
            isDragging = true;
            pauseAutoSlide(); // Pause auto-slide during touch
        }, { passive: true });
        
        carousel.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            // Prevent default scrolling during swipe
            e.preventDefault();
        }, { passive: false });
        
        carousel.addEventListener('touchend', (e) => {
            if (!isDragging) return;
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
            isDragging = false;
            resumeAutoSlide(); // Resume auto-slide after touch
        }, { passive: true });
        
        // Mouse events for desktop drag
        carousel.addEventListener('mousedown', (e) => {
            touchStartX = e.clientX;
            startTime = Date.now();
            isDragging = true;
            pauseAutoSlide(); // Pause auto-slide during drag
            e.preventDefault(); // Prevent text selection
        });
        
        carousel.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
        });
        
        carousel.addEventListener('mouseup', (e) => {
            if (!isDragging) return;
            touchEndX = e.clientX;
            handleSwipe();
            isDragging = false;
            resumeAutoSlide(); // Resume auto-slide after drag
        });
        
        carousel.addEventListener('mouseleave', () => {
            if (isDragging) {
                isDragging = false;
                resumeAutoSlide();
            }
        });
        
        function handleSwipe() {
            const swipeDistance = touchEndX - touchStartX;
            const swipeTime = Date.now() - startTime;
            const currentTime = Date.now();
            const minSwipeDistance = 50; // Minimum distance for swipe
            const maxSwipeTime = 500; // Maximum time for swipe (ms)
            const debounceTime = 300; // Minimum time between swipes (ms)
            
            // Debounce rapid swipes
            if (currentTime - lastSwipeTime < debounceTime) {
                // Swipe ignored - too rapid
                return;
            }
            
            // Check if it's a valid swipe
            if (Math.abs(swipeDistance) >= minSwipeDistance && swipeTime <= maxSwipeTime) {
                lastSwipeTime = currentTime;
                
                if (swipeDistance > 0) {
                    // Swiped right - go to next slide
                    nextSlide();
                } else {
                    // Swiped left - go to previous slide  
                    prevSlide();
                }
                
                // Delayed restart to prevent timer conflicts
                setTimeout(() => {
                    restartAutoSlide(); 
                }, 50);
            }
        }
        
        // Swipe handlers active
    }

    // ========== MAIN CAROUSEL SETUP ==========
    function setupCarouselNavigation() {
        const slides = document.querySelectorAll('.hero-slide');
        const dots = document.querySelectorAll('.carousel-dot');
        
        if (slides.length === 0) {
            // No slides found
            return;
        }
        
        // Set initial state
        currentSlide = 0;
        totalSlides = slides.length;
        
        setupArrowHandlers();
        setupDotHandlers();
        setupHoverHandlers();
        setupSwipeHandlers();
        
        startAutoSlide();
        
    }

</script>
</body>
</html>
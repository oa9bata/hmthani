<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جمعية مثاني القرآنية - الأخبار</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Database Configuration and Service -->
    <script src="db-config.js"></script>
    <script src="database-service.js"></script>
    <style>
        @font-face {
            font-family: 'IBMPlexSansArabic';
            src: url('font/IBMPlexSansArabic-Regular.woff2') format('woff2'),
                 url('font/IBMPlexSansArabic-Regular.woff') format('woff'),
                 url('font/IBMPlexSansArabic-Regular.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'IBMPlexSansArabic';
            src: url('font/IBMPlexSansArabic-Medium.woff2') format('woff2'),
                 url('font/IBMPlexSansArabic-Medium.woff') format('woff'),
                 url('font/IBMPlexSansArabic-Medium.ttf') format('truetype');
            font-weight: 500;
            font-style: normal;
            font-display: swap;
        }
        
        body {
            font-family: 'IBMPlexSansArabic', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 500;
            direction: rtl;
            background-image: url('assets/background.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        
        /* Use medium weight for most UI elements */
        .dropdown-content, nav, button, .font-medium, h1, h2, h3, h4, h5, h6 {
            font-weight: 500;
        }
        html {
            scroll-behavior: smooth;
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .counter {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
        }
        
        .ticker {
            overflow: hidden;
            white-space: nowrap;
            animation: scroll-rtl 30s linear infinite;
        }
        
        @keyframes scroll-rtl {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .partner-scroll {
            animation: partnerScroll-rtl 15s linear infinite;
        }
        
        @keyframes partnerScroll-rtl {
            0% { transform: translateX(0); }
            100% { transform: translateX(50%); }
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .partner-scroll {
                animation: partnerScroll-rtl 10s linear infinite;
            }
            
            /* Improve touch targets for mobile */
            button, a, .mobile-dropdown button {
                min-height: 44px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            }
            
            /* Mobile menu improvements */
            #mobile-menu-btn {
                min-width: 48px;
                min-height: 48px;
                display: flex;
                align-items: center;
                justify-content: center;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Mobile dropdown buttons */
            .mobile-dropdown button {
                padding: 1rem;
                width: 100%;
                text-align: right;
                transition: all 0.2s ease;
            }
            
            .mobile-dropdown button:active {
                background-color: rgba(0, 161, 125, 0.1);
                transform: scale(0.98);
            }
            
            /* Mobile menu links */
            .mobile-dropdown-content a, .mobile-menu-link {
                padding: 0.75rem 1rem;
                min-height: 44px;
                display: flex;
                align-items: center;
                transition: all 0.2s ease;
            }
            
            .mobile-dropdown-content a:active, .mobile-menu-link:active {
                background-color: rgba(0, 161, 125, 0.1);
                transform: scale(0.98);
            }
            
            /* Mobile text sizing */
            h1 { font-size: 2rem !important; }
            h2 { font-size: 1.75rem !important; }
            h3 { font-size: 1.25rem !important; }
            
            /* Mobile spacing */
            .py-16 { padding-top: 3rem !important; padding-bottom: 3rem !important; }
            .py-12 { padding-top: 2rem !important; padding-bottom: 2rem !important; }
            
            /* Mobile achievements grid */
            .grid-cols-2 { grid-template-columns: repeat(1, minmax(0, 1fr)) !important; }
            
            /* Mobile counter sizing */
            .counter { font-size: 2rem !important; }
            
            /* Mobile icons */
            .text-4xl { font-size: 2.5rem !important; }
            
            /* Mobile news cards */
            /* Mobile hero carousel enhanced */
            .hero-carousel { 
                height: 15vh !important; 
                min-height: 120px !important;
                max-height: 150px !important;
            }
            .hero-slide { 
                background-size: cover !important;
                background-position: center !important;
                background-attachment: scroll !important;
            }
            
            /* Mobile image responsive enhancements */
            .aspect-\[4\/3\] {
                aspect-ratio: 4/3 !important;
            }
            
            /* Extra responsive scaling for very small screens */
            @media (max-width: 360px) {
                .max-w-sm { max-width: calc(100vw - 3rem) !important; }
            }
            
            /* Mobile news cards */
            .md\\:grid-cols-3 { grid-template-columns: repeat(1, minmax(0, 1fr)) !important; }
            
            /* Mobile footer */
            .md\\:grid-cols-4 { grid-template-columns: repeat(1, minmax(0, 1fr)) !important; }
            
            /* Mobile header height */
            #hdr { height: 120px !important; }
            
            /* Mobile logo sizing */
            .w-16, .w-20 { width: 3rem !important; }
            .h-12, .h-15 { height: 2.5rem !important; }
            
            /* Mobile achievements background */
            .py-16.bg-black\/30 { background-color: #00a17d !important; }
        }
        
        /* Tablet optimizations */
        @media (min-width: 769px) and (max-width: 1024px) {
            .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .md\\:grid-cols-3 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
            .md\\:grid-cols-4 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        }
        
        /* Extra small mobile */
        @media (max-width: 480px) {
            .px-4 { padding-left: 1rem !important; padding-right: 1rem !important; }
            
            h2 { font-size: 1.5rem !important; }
            .counter { font-size: 1.75rem !important; }
            .text-4xl { font-size: 2rem !important; }
            
            .curved-underline::after {
                width: min(150px, 60vw) !important;
                height: 3px !important;
                border-radius: 0 0 0 20px !important;
                max-width: calc(100vw - 3rem) !important;
            }
            
            #hdr { height: 100px !important; }
            
            /* Extra small mobile hero */
            .hero-carousel { 
                height: 15vh !important; 
                min-height: 120px !important;
                max-height: 150px !important;
            }
            
            /* Mobile image scaling for small screens */
            .aspect-\[4\/3\] {
                aspect-ratio: 4/3 !important;
                max-width: calc(100vw - 2rem) !important;
            }
            
            /* Stack footer images vertically on very small screens */
            .footer-images { flex-direction: column !important; align-items: center !important; }
        }
        
        /* Landscape mobile optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            .aspect-\[4\/3\] {
                aspect-ratio: 16/9 !important;
                max-width: 400px !important;
            }
        }
        
        /* Ultra-wide screen adjustments */
        @media (max-width: 320px) {
            .aspect-\[4\/3\] {
                aspect-ratio: 1/1 !important;
                max-width: calc(100vw - 1.5rem) !important;
            }
        }
        
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .lightbox.active {
            display: flex;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background: white;
            min-width: 250px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            z-index: 1;
            border-radius: 8px;
            padding: 0.5rem 0;
            top: 100%;
            left: 0;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Hero carousel styles */
        .hero-carousel {
            position: relative;
            height: 65vh;
            overflow: hidden;
        }
        
        /* Progressive responsive hero breakpoints - Wider screens = Taller images */
        
        /* 4K and above (3840px+) - Tallest */
        @media (min-width: 3840px) {
            .hero-carousel { height: 80vh; }
        }
        
        /* 2K monitor (2560x1440) - Very tall */
        @media (min-width: 2560px) and (max-width: 3839px) {
            .hero-carousel { height: 65vh; }
        }
        
        /* Ultra-wide desktop (2048px-2559px) */
        @media (min-width: 2048px) and (max-width: 2559px) {
            .hero-carousel { height: 60vh; }
        }
        
        /* Full HD+ (1920px-2047px) */
        @media (min-width: 1920px) and (max-width: 2047px) {
            .hero-carousel { height: 50vh; }
        }
        
        /* Large desktop (1600px-1919px) */
        @media (min-width: 1600px) and (max-width: 1919px) {
            .hero-carousel { height: 45vh; }
        }
        
        /* Medium large desktop (1440px-1599px) */
        @media (min-width: 1440px) and (max-width: 1599px) {
            .hero-carousel { height: 42vh; }
        }
        
        /* Standard desktop (1280px-1439px) */
        @media (min-width: 1280px) and (max-width: 1439px) {
            .hero-carousel { height: 40vh; }
        }
        
        /* Medium desktop */
        @media (max-width: 1200px) {
            .hero-carousel { height: 55vh; }
        }
        
        /* Small desktop */
        @media (max-width: 1100px) {
            .hero-carousel { height: 50vh; }
        }
        
        /* Large laptop */
        @media (max-width: 1000px) {
            .hero-carousel { height: 45vh; }
        }
        
        /* Medium laptop */
        @media (max-width: 900px) {
            .hero-carousel { height: 40vh; }
        }
        
        /* Small laptop */
        @media (max-width: 850px) {
            .hero-carousel { height: 35vh; }
        }
        
        /* Tablet */
        @media (max-width: 800px) {
            .hero-carousel { height: 30vh; }
        }
        
        /* Mobile */
        @media (max-width: 768px) {
            .hero-carousel {
                height: 15vh !important;
                min-height: 120px !important;
                max-height: 150px !important;
            }
        }
        
        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        /* Mobile responsive background positioning */
        @media (max-width: 768px) {
            .hero-slide {
                background-size: cover;
                background-position: center center;
                background-attachment: scroll;
            }
        }
        
        /* Extra small mobile responsive */
        @media (max-width: 480px) {
            .hero-slide {
                background-size: cover;
                background-position: center;
                background-attachment: scroll;
            }
        }
        
        .hero-slide.active {
            opacity: 1;
        }
        
        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }
        
        /* Enhanced overlay for mobile readability */
        @media (max-width: 768px) {
            .hero-overlay {
                background: rgba(0, 0, 0, 0.6);
            }
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        /* RTL adjustments for dropdowns */
        .dropdown-content a {
            text-align: right;
            direction: rtl;
        }
        #hdr{
            height: 160px;
            display: flex;
            align-items: center;
            background-image: url('assets/hdr-background2.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6), 0 4px 15px rgba(0, 0, 0, 0.4);
        }
        #hdr::before {
            content: '';
            position: absolute;
            inset: 0;
            z-index: 0;
        }
        #hdr > * {
            position: relative;
            z-index: 1;
        }

        /* Curved underline design */
        .section-header-container {
            position: relative;
            text-align: right;
            margin-bottom: 40px;
            overflow: hidden;
        }

        .curved-underline {
            position: relative;
            display: inline-block;
            padding-bottom: 35px;
            margin-right: 0;
            margin-bottom: 0;
            max-width: 100%;
        }

        .section-subtitle {
            text-align: right;
            margin-top: 15px;
            margin-bottom: 20px;
            padding-right: 0;
            position: relative;
        }

        .curved-underline::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: min(300px, 80vw);
            height: 4px;
            background: #efb740;
            transform: translateY(-5px);
            border-radius: 0 0 0 35px;
            max-width: 100%;
        }

        .curved-underline.green::after {
            background: #00a17d;
        }

        .curved-underline.brown::after {
            background: #00a17d;
        }

        .curved-underline.white::after {
            background: #ffffff;
        }

        .curved-underline.gold::after {
            background: #efb740;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .curved-underline::after {
                width: min(200px, 70vw);
                height: 3px;
                border-radius: 0 0 0 25px;
                max-width: calc(100vw - 2rem);
            }
            
            .section-header-container {
                padding: 0 1rem;
                box-sizing: border-box;
            }
        }

    </style>
    <style>
        .hover-green:hover {
          color: #00a17d;
        }
      </style>
</head>
<body class="bg-gray-50">


    <header class="bg-white/90 backdrop-blur-md shadow-lg sticky top-0 z-50" role="navigation" aria-label="التنقل الرئيسي">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-3 md:py-8">
                <!-- Logo and Contact Section (Left side in RTL) -->
                <div class="flex items-center space-x-6 space-x-reverse mr-2 lg:mr-12">
                    <!-- Logo -->
                    <div class="w-16 h-12 sm:w-20 sm:h-16 md:w-32 md:h-28 lg:w-36 lg:h-32 flex items-center justify-center overflow-hidden" id="logo">
                        <img src="assets/logoTransparent.png" alt="مثاني القرآنية" class="w-full h-full object-contain rounded-lg shadow-md">
                    </div>
                    
                    <!-- Contact Buttons -->
                    <div class="hidden lg:flex flex-col space-y-2">
                        <!-- Phone Contact -->
                        <div class="flex items-center space-x-2 space-x-reverse bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-[#00a17d]/5 hover:border-[#00a17d]/20 transition-colors phone-contact-card">
                            <i class="fas fa-phone text-[#00a17d] text-sm"></i>
                            <div class="flex flex-col text-right">
                                <span class="text-xs font-medium text-[#00a17d]">اتصل بنا</span>
                                <a href="tel:+966112345678" class="text-xs text-gray-600 hover:text-[#00a17d] transition-colors">011 234 5678</a>
                            </div>
                        </div>
                        
                        <!-- Email Contact -->
                        <div class="flex items-center space-x-2 space-x-reverse bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-200 hover:bg-[#00a17d]/5 hover:border-[#00a17d]/20 transition-colors phone-contact-card">
                            <i class="fas fa-envelope text-[#00a17d] text-sm"></i>
                            <div class="flex flex-col text-right">
                                <span class="text-xs font-medium text-[#00a17d]">راسلنا</span>
                                <a href="mailto:info@mthani.org" class="text-xs text-gray-600 hover:text-[#00a17d] transition-colors">info@mthani.org</a>
                            </div>
                        </div>
                    </div>
                </div>

                            <nav class="hidden lg:flex items-center space-x-8 space-x-reverse ml-2 lg:ml-12">
                <a href="index.html" class="text-gray-700 hover:text-[#00a17d] font-medium">الرئيسية</a>
                    
                    <!-- عن الجمعية -->
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#00a17d] font-medium flex items-center" aria-expanded="false">
                            عن الجمعية <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="about-us.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-info-circle ml-2 text-[#00a17d]"></i>من نحن</a>
                            <a href="license-certificate.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-certificate ml-2 text-[#00a17d]"></i>شهاده الترخيص</a>
                            <a href="commercial-registry.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-file-contract ml-2 text-[#00a17d]"></i>السجل التجاري</a>
                            <a href="strategic-map.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-map ml-2 text-[#00a17d]"></i> الخريطه الإستراتيجيه</a>
                            <a href="general-assembly.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-users ml-2 text-[#00a17d]"></i>الجمعية العمومية</a>
                            <a href="board-of-directors.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-user-tie ml-2 text-[#00a17d]"></i>مجلس الإداره</a>
                            <a href="executive-management.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-briefcase ml-2 text-[#00a17d]"></i>الإدارة التنفيذية</a>
                            <a href="organizational-structure.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-sitemap ml-2 text-[#00a17d]"></i>الهيكل التنظيمي</a>
                            <a href="work-team.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-user-friends ml-2 text-[#00a17d]"></i>فريق العمل</a>
                        </div>
                    </div>
                    
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#00a17d] font-medium flex items-center" aria-expanded="false">
                            التقارير <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="annual-report-2024.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-file-alt ml-2 text-[#00a17d]"></i>التقرير السنوي لعام 2024</a>
                            <a href="annual-report-2025.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-file-alt ml-2 text-[#00a17d]"></i>التقرير السنوي لعام 2025</a>
                        </div>
                    </div>
                    
                    <!-- قياس الرضا -->
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#00a17d] font-medium flex items-center" aria-expanded="false">
                            قياس الرضا <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-smile ml-2 text-[#00a17d]"></i> رضا المستفيدين</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-user-check ml-2 text-[#00a17d]"></i> رضا أعضاء الجمعية العمومية</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-id-badge ml-2 text-[#00a17d]"></i>رضا الموظفين </a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-chart-line ml-2 text-[#00a17d]"></i>تقارير قياس الرضا</a>
                        </div>
                    </div>
                    
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#00a17d] font-medium flex items-center" aria-expanded="false">
                            الحوكمة <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="governance-guides.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-book ml-2 text-[#00a17d]"></i>ادلة الحوكمة</a>
                            <a href="regulations-policies.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-gavel ml-2 text-[#00a17d]"></i>اللوائح والسياسات</a>
                            <a href="privacy-policy.html" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-shield-alt ml-2 text-[#00a17d]"></i>سياسة الخصوصية</a>
                        </div>
                    </div>
                    
                    <!-- تطوع معنا -->
                    <div class="relative dropdown">
                        <button class="text-gray-700 hover:text-[#00a17d] font-medium flex items-center" aria-expanded="false">
                            تطوع معنا  <i class="fas fa-chevron-down mr-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content">
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-hands-helping ml-2 text-[#00a17d]"></i>منصة العمل التطوعي</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-heart ml-2 text-[#00a17d]"></i>الفرص التطوعية</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-[#00a17d]/10"><i class="fas fa-user-plus ml-2 text-[#00a17d]"></i>إنضم معنا</a>
                        </div>
                    </div>
                    

                </nav>
                
                <!-- Mobile Contact & Menu -->
                <div class="lg:hidden flex items-center space-x-2 space-x-reverse">
                    <!-- Mobile Phone Contact -->
                    <a href="tel:+966112345678" class="flex items-center space-x-1 space-x-reverse text-[#00a17d] hover:text-[#00c59e] transition-colors mobile-phone-contact">
                        <i class="fas fa-phone text-sm"></i>
                        <span class="text-xs font-medium">اتصل</span>
                    </a>
                    
                    <!-- Mobile Email Contact -->
                    <a href="mailto:info@mthani.org" class="flex items-center space-x-1 space-x-reverse text-[#00a17d] hover:text-[#00c59e] transition-colors mobile-phone-contact">
                        <i class="fas fa-envelope text-sm"></i>
                        <span class="text-xs font-medium">راسل</span>
                    </a>
                    
                    <!-- Mobile Menu Button -->
                    <button class="text-gray-700" id="mobile-menu-btn">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div class="md:hidden bg-white/90 backdrop-blur-md border-t hidden" id="mobile-menu">
                    <div class="px-4 py-6 space-y-2">
            <a href="index.html" class="block py-3 text-gray-700 hover:text-[#00a17d] font-medium mobile-menu-link"><i class="fas fa-home ml-2 text-[#00a17d]"></i>الرئيسية</a>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#00a17d] font-medium py-2">
                        عن الجمعية <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="about-us.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-info-circle ml-2 text-[#00a17d]"></i>من نحن</a>
                        <a href="license-certificate.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-certificate ml-2 text-[#00a17d]"></i>شهاده الترخيص</a>
                        <a href="commercial-registry.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-file-contract ml-2 text-[#00a17d]"></i>السجل التجاري</a>
                        <a href="strategic-map.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-map ml-2 text-[#00a17d]"></i>الخريطه الإستراتيجيه</a>
                        <a href="general-assembly.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-users ml-2 text-[#00a17d]"></i>الجمعية العمومية</a>
                        <a href="board-of-directors.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-user-tie ml-2 text-[#00a17d]"></i>مجلس الإداره</a>
                        <a href="executive-management.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-briefcase ml-2 text-[#00a17d]"></i>الإدارة التنفيذية</a>
                        <a href="organizational-structure.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-sitemap ml-2 text-[#00a17d]"></i>الهيكل التنظيمي</a>
                        <a href="work-team.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-user-friends ml-2 text-[#00a17d]"></i>فريق العمل</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#00a17d] font-medium py-2">
                        التقارير <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="annual-report-2024.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-file-alt ml-2 text-[#00a17d]"></i>التقرير السنوي لعام 2024</a>
                        <a href="annual-report-2025.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-file-alt ml-2 text-[#00a17d]"></i>التقرير السنوي لعام 2025</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#00a17d] font-medium py-2">
                        قياس الرضا <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-smile ml-2 text-[#00a17d]"></i>رضا المستفيدين</a>
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-user-check ml-2 text-[#00a17d]"></i>رضا أعضاء الجمعية العمومية</a>
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-id-badge ml-2 text-[#00a17d]"></i>رضا الموظفين</a>
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-chart-line ml-2 text-[#00a17d]"></i>تقارير قياس الرضا</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#00a17d] font-medium py-2">
                        الحوكمة <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="governance-guides.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-book ml-2 text-[#00a17d]"></i>ادلة الحوكمة</a>
                        <a href="regulations-policies.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-gavel ml-2 text-[#00a17d]"></i>اللوائح والسياسات</a>
                        <a href="privacy-policy.html" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-shield-alt ml-2 text-[#00a17d]"></i>سياسة الخصوصية</a>
                    </div>
                </div>
                <div class="mobile-dropdown">
                    <button class="w-full flex justify-between items-center text-gray-700 hover:text-[#00a17d] font-medium py-2">
                        تطوع معنا <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="mobile-dropdown-content hidden pl-4 space-y-1">
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-hands-helping ml-2 text-[#00a17d]"></i>منصة العمل التطوعي</a>
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-heart ml-2 text-[#00a17d]"></i>الفرص التطوعية</a>
                        <a href="#" class="block py-3 text-gray-700 hover:bg-[#00a17d]/10 rounded-lg"><i class="fas fa-user-plus ml-2 text-[#00a17d]"></i>إنضم معنا</a>
                    </div>
                </div>

            </div>
        </div>
    </header>

    <section class="bg-gradient-to-r from-[#00a17d] to-[#00c59e] text-white py-16">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-4 curved-underline white">الأخبار</h1>
            <p class="text-xl md:text-2xl text-white/90 max-w-3xl mx-auto">آخر الأخبار والفعاليات من جمعية مثاني القرآنية</p>
        </div>
    </section>


    <section class="py-8 bg-white">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-center space-x-4 space-x-reverse">
                <button id="filter-latest" class="news-filter-btn active px-6 py-3 rounded-lg font-medium transition-all duration-300 bg-[#00a17d] text-white shadow-lg">
                    <i class="fas fa-clock ml-2"></i>الأحدث
                </button>
                <button id="filter-chosen" class="news-filter-btn px-6 py-3 rounded-lg font-medium transition-all duration-300 bg-gray-200 text-gray-700 hover:bg-gray-300">
                    <i class="fas fa-star ml-2"></i>المختار لك
                </button>
            </div>
        </div>
    </section>


    <section class="py-12 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="news-grid">
                <!-- News will be loaded from localStorage via JavaScript -->
            </div>



            </div>
        </div>
    </section>


    <!-- Footer -->
    <footer class="bg-[#00a17d] text-white">
        <div class="max-w-7xl mx-auto px-4 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- About Section -->
                <div class="mb-8 md:mb-0 text-center md:text-right">
                    <div class="flex items-center space-x-3 space-x-reverse mb-6 justify-center md:justify-start">
                        <div class="w-10 h-10 bg-white/30 rounded-full flex items-center justify-center">
                            <i class="fas fa-book-quran text-white"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">جمعية مثاني القرآنية</h3>
                            <p class="text-sm text-white">القرآنية الخيرية</p>
                        </div>
                    </div>
                    <p class="text-white mb-6">جمعية مثاني القرآنية تهدف إلى تعليم القرآن الكريم ونشر علومه، ورعاية حلقات التحفيظ، وتنمية القيم القرآنية في المجتمع.</p>
                    <div class="flex space-x-4 space-x-reverse justify-center md:justify-start">
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-[#efb740] hover:text-white transition-colors">
                            <i class="fab fa-facebook text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-[#efb740] hover:text-white transition-colors">
                            <i class="fab fa-twitter text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-[#efb740] hover:text-white transition-colors">
                            <i class="fab fa-instagram text-white"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center hover:bg-[#efb740] hover:text-white transition-colors">
                            <i class="fab fa-linkedin text-white"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div class="mb-8 md:mb-0 flex justify-center footer-images">
                   <img src="assets/unprofitableGrowth.png" alt="logo" class="w-full max-w-[200px] h-auto object-contain">
                </div>
                
                <!-- Services -->
                <div class="mb-8 md:mb-0 flex justify-center footer-images">
                    <img src="assets/Vision-2030.png" alt="logo" class="w-full max-w-[200px] h-auto object-contain">
                </div>
                
                <!-- Contact Info -->
                <div class="mb-8 md:mb-0 text-center md:text-right">
                    <h3 class="text-lg font-bold mb-6">معلومات الاتصال</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-map-marker-alt text-[#efb740] ml-3"></i>
                            <span class="text-white">المملكة العربية السعودية، جده، حي الورود</span>
                        </div>
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-phone text-[#efb740] ml-3"></i>
                            <a href="tel:+966546638312" class="text-white hover:text-[#efb740] transition-colors">546638312 (+966)</a>
                        </div>
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-envelope text-[#efb740] ml-3"></i>
                            <a href="mailto:mathani.quran@gmail.com" class="text-white hover:text-[#efb740] transition-colors">mathani.quran@gmail.com</a>
                        </div>
                        <div class="flex items-center justify-center md:justify-start">
                            <i class="fas fa-clock text-[#efb740] ml-3"></i>
                            <span class="text-white">الأحد - الخميس: 8:00 ص - 4:00 م</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom Footer -->
        <div class="border-t border-white/20">
            <div class="max-w-7xl mx-auto px-4 py-6">
                <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-right">
                    <p class="text-white text-sm mb-4 md:mb-0">
                        &copy; 2025 جمعية مثاني القرآنية. جميع الحقوق محفوظة.
                    </p>
                    <div class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-6 md:space-x-reverse">
                        <a href="privacy-policy.html" class="text-white hover:text-[#efb740] text-sm transition-colors">سياسة الخصوصية</a>
                        <a href="#" class="text-white hover:text-[#efb740] text-sm transition-colors">تصميم وتطوير وكالة قارن لتطوير المواقع</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
        
        <!-- Scroll to Top Button -->
        <button id="scroll-to-top" class="fixed bottom-6 left-6 bg-blue-600 text-white w-12 h-12 rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 opacity-0 invisible">
            <i class="fas fa-arrow-up"></i>
        </button>
    </footer>

    <!-- Lightbox Modal -->
    <div class="lightbox" id="lightbox">
        <div class="relative max-w-4xl mx-4">
            <button class="absolute -top-10 right-0 text-white text-2xl hover:text-gray-300" id="close-lightbox">
                <i class="fas fa-times"></i>
            </button>
            <img id="lightbox-image" src="" alt="" class="max-w-full max-h-screen object-contain rounded-lg">
        </div>
    </div>

    <script>
// ========== SECURITY WARNING ==========
console.log('%c⚠️ تحذير أمني شديد | SEVERE SECURITY WARNING ⚠️', 'color: #ff0000; font-size: 24px; font-weight: bold; background: #ffeeee; padding: 10px; border: 3px solid #ff0000;');
console.log('%cتحذير: هذا الموقع محمي قانونياً!', 'color: #ff0000; font-size: 18px; font-weight: bold;');
console.log('%cWARNING: This website is legally protected!', 'color: #ff0000; font-size: 18px; font-weight: bold;');
console.log('%c🚨 تحذير للمطورين المخوّلين فقط | DEVELOPERS ONLY WARNING 🚨', 'color: #ff0000; font-size: 20px; font-weight: bold; text-decoration: underline;');
console.log('%cإذا لم تكن مطوراً مُخولاً، فأنت تنتهك القانون!', 'color: #ff0000; font-size: 16px; font-weight: bold;');
console.log('%cIf you are not an authorized developer, you are violating the law!', 'color: #ff0000; font-size: 16px; font-weight: bold;');
console.log('%c🔒 عنوان IP الخاص بك مُسجل ومُراقب: ' + window.location.hostname, 'color: #ff0000; font-size: 16px; font-weight: bold; background: #ffe6e6;');
console.log('%c🔒 Your IP address is logged and monitored: ' + window.location.hostname, 'color: #ff0000; font-size: 16px; font-weight: bold; background: #ffe6e6;');
console.log('%c⚖️ جمعية مثاني القرآنية - محمية بموجب القانون السعودي', 'color: #ff0000; font-size: 16px; font-weight: bold;');
console.log('%c⚖️ Mathani Quranic Association - Protected under Saudi Law', 'color: #ff0000; font-size: 16px; font-weight: bold;');
console.log('%cللمطورين المُخولين فقط - تحت المراقبة الأمنية', 'color: #ff0000; font-size: 14px; font-weight: bold;');
console.log('%cAuthorized developers only - Under security surveillance', 'color: #ff0000; font-size: 14px; font-weight: bold;');
console.log('%c' + '='.repeat(80), 'color: #ff0000; font-weight: bold;');

// ========== SITE MANAGEMENT & ERROR HANDLING ==========
// Site closure check
    function checkSiteClosure() {
        const isClosed = localStorage.getItem('mthani-site-closed') === 'true';
        if (isClosed && !window.location.pathname.includes('dashboard.html')) {
            // Site is closed for maintenance - could redirect to a maintenance page
            // For now, just return false to prevent normal operation
            console.warn('Site is in maintenance mode');
            return false;
        }
        return true;
    }

// Global error handler (only for critical errors)
window.onerror = function(message, source, lineno, colno, error) {
    console.error('JavaScript Error:', { message, source, lineno, colno, error });
    // Only redirect on critical errors, not minor ones
    if (message.includes('Script error') || message.includes('Network Error') || message.includes('Cannot read property')) {
        setTimeout(() => {
            window.location.href = 'error.html?code=js&msg=' + encodeURIComponent(message);
        }, 3000); // Increased delay to avoid false positives
    }
    return false;
};

// Unhandled promise rejection handler (only for critical rejections)
window.addEventListener('unhandledrejection', function(event) {
    console.error('Unhandled Promise Rejection:', event.reason);
    // Only redirect on critical promise rejections
    if (event.reason && (event.reason.toString().includes('Network') || event.reason.toString().includes('Failed to fetch'))) {
        setTimeout(() => {
            window.location.href = 'error.html?code=promise&msg=' + encodeURIComponent(event.reason);
        }, 3000);
    }
});

// DOM Content Loaded Event
document.addEventListener('DOMContentLoaded', function() {
    // Check site closure first
    if (!checkSiteClosure()) return;
    
    // ========== DROPDOWN MENU FUNCTIONALITY ==========
    const dropdowns = document.querySelectorAll('.dropdown');
    dropdowns.forEach(dropdown => {
        const button = dropdown.querySelector('button');
        const content = dropdown.querySelector('.dropdown-content');
        
        // Show dropdown on mouse enter
        dropdown.addEventListener('mouseenter', function() {
            // Close other dropdowns
            dropdowns.forEach(otherDropdown => {
                if (otherDropdown !== dropdown) {
                    otherDropdown.querySelector('.dropdown-content').style.display = 'none';
                    otherDropdown.querySelector('button').setAttribute('aria-expanded', 'false');
                }
            });
            
            // Show current dropdown
            content.style.display = 'block';
            button.setAttribute('aria-expanded', 'true');
        });
        
        // Hide dropdown on mouse leave
        dropdown.addEventListener('mouseleave', function() {
            content.style.display = 'none';
            button.setAttribute('aria-expanded', 'false');
        });
        
        // Handle keyboard navigation for accessibility
        button.addEventListener('click', function(e) {
            e.preventDefault();
        });
    });

    // ========== MOBILE MENU FUNCTIONALITY ==========
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (mobileMenuBtn && mobileMenu) {
        mobileMenuBtn.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
            const icon = mobileMenuBtn.querySelector('i');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
            
            // Reset all mobile dropdowns to hidden when opening menu
            if (!mobileMenu.classList.contains('hidden')) {
                const allMobileDropdowns = mobileMenu.querySelectorAll('.mobile-dropdown-content');
                allMobileDropdowns.forEach(dropdown => {
                    dropdown.classList.add('hidden');
                });
            }
        });
    }

    // ========== HERO CAROUSEL FUNCTIONALITY ==========
    const heroSlides = document.querySelectorAll('.hero-slide');
    let currentSlide = 0;

    function showSlide(index) {
        heroSlides.forEach((slide, i) => {
            slide.classList.remove('active');
            if (i === index) {
                slide.classList.add('active');
            }
        });
    }

    function nextSlide() {
        currentSlide = (currentSlide + 1) % heroSlides.length;
        showSlide(currentSlide);
    }

    // Auto-advance carousel every 3 seconds
    if (heroSlides.length > 0) {
        setInterval(nextSlide, 3000);
    }

    // ========== NEWS TICKER FUNCTIONALITY ==========
    const newsTicker = document.getElementById('news-ticker');
    if (newsTicker) {
        let tickerPosition = 0;
        const tickerSpeed = 1;

        function animateTicker() {
            tickerPosition -= tickerSpeed;
            if (tickerPosition <= -newsTicker.offsetWidth) {
                tickerPosition = newsTicker.parentElement.offsetWidth;
            }
            newsTicker.style.transform = `translateX(${tickerPosition}px)`;
            requestAnimationFrame(animateTicker);
        }

        animateTicker();
    }

    // ========== MEDIA TABS FUNCTIONALITY ==========
    const mediaTabs = document.querySelectorAll('.media-tab');
    const mediaContents = document.querySelectorAll('.media-content');

    mediaTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const targetTab = this.dataset.tab;
            
            // Update active tab
            mediaTabs.forEach(t => t.classList.remove('active', 'bg-white', 'text-[#432d17]'));
            this.classList.add('active', 'bg-white', 'text-[#432d17]');
            
            // Show/hide content
            mediaContents.forEach(content => {
                if (content.id === targetTab) {
                    content.classList.remove('hidden');
                } else {
                    content.classList.add('hidden');
                }
            });
        });
    });

    // ========== LIGHTBOX FUNCTIONALITY ==========
    const lightboxTriggers = document.querySelectorAll('.lightbox-trigger');
    let lightboxModal = null;

    function createLightbox(src, title) {
        // Remove existing lightbox if any
        if (lightboxModal) {
            lightboxModal.remove();
        }

        // Create lightbox modal
        lightboxModal = document.createElement('div');
        lightboxModal.className = 'fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4';
        lightboxModal.innerHTML = `
            <div class="relative max-w-4xl max-h-full">
                <img src="${src}" alt="${title}" class="max-w-full max-h-full object-contain">
                <button class="absolute top-4 right-4 text-white text-2xl hover:text-gray-300 lightbox-close">
                    <i class="fas fa-times"></i>
                </button>
                <div class="absolute bottom-4 left-4 text-white bg-black bg-opacity-50 px-4 py-2 rounded">
                    <h3 class="font-semibold">${title}</h3>
                </div>
            </div>
        `;

        document.body.appendChild(lightboxModal);

        // Close lightbox functionality
        const closeBtn = lightboxModal.querySelector('.lightbox-close');
        closeBtn.addEventListener('click', closeLightbox);
        
        lightboxModal.addEventListener('click', function(e) {
            if (e.target === lightboxModal) {
                closeLightbox();
            }
        });

        // ESC key to close
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeLightbox();
            }
        });
    }

    function closeLightbox() {
        if (lightboxModal) {
            lightboxModal.remove();
            lightboxModal = null;
        }
    }

    lightboxTriggers.forEach(trigger => {
        trigger.addEventListener('click', function() {
            const src = this.dataset.src;
            const title = this.querySelector('h3').textContent;
            createLightbox(src, title);
        });
    });

    // ========== COUNTER ANIMATION ==========
    const counters = document.querySelectorAll('.counter');
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const counter = entry.target;
                const target = parseInt(counter.dataset.target);
                // Make duration proportional to the target value (e.g., 10ms per unit, capped for very large numbers)
                let duration = Math.min(4000, Math.max(1200, target * 10)); // 10ms per unit, min 1.2s, max 4s
                if (target > 10000) duration = Math.min(6000, target * 0.2); // For very large numbers, slow down a bit more
                const step = target / (duration / 16); // 60fps
                let current = 0;

                counter.style.transition = 'transform 0.3s cubic-bezier(.68,-0.55,.27,1.55), color 0.3s';
                counter.style.transform = 'scale(1.2)';
                counter.style.color = 'white';

                setTimeout(() => {
                    counter.style.transform = 'scale(1)';
                }, 300);

                const updateCounter = () => {
                    if (current < target) {
                        current += step;
                        counter.textContent = Math.floor(current).toLocaleString('en-US');
                        // Add a bounce effect every 20% progress
                        if (target > 0 && Math.abs(current % (target / 5)) < step) {
                            counter.style.transform = 'scale(1.15)';
                            setTimeout(() => {
                                counter.style.transform = 'scale(1)';
                            }, 120);
                        }
                        requestAnimationFrame(updateCounter);
                    } else {
                        counter.textContent = target.toLocaleString('en-US');
                        counter.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            counter.style.transform = 'scale(1)';
                        }, 200);
                    }
                };

                updateCounter();
                counterObserver.unobserve(counter);
            }
        });
    });

    counters.forEach(counter => {
        counterObserver.observe(counter);
    });

    // ========== PARTNERS CAROUSEL ==========
    const partnerScroll = document.querySelector('.partner-scroll');
    if (partnerScroll) {
        let scrollPosition = 0;
        const scrollSpeed = 1;

        function animatePartners() {
            scrollPosition -= scrollSpeed;
            if (scrollPosition <= -partnerScroll.scrollWidth / 2) {
                scrollPosition = 0;
            }
            partnerScroll.style.transform = `translateX(${scrollPosition}px)`;
            requestAnimationFrame(animatePartners);
        }

        animatePartners();
    }

    // ========== FADE IN ANIMATION ==========
    const fadeElements = document.querySelectorAll('.fade-in');
    const fadeObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Element is in view - animate in
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            } else {
                // Element is out of view - reset for next animation
                entry.target.style.opacity = '0';
                entry.target.style.transform = 'translateY(30px)';
            }
        });
    }, {
        threshold: 0.1
    });

    fadeElements.forEach(element => {
        element.style.opacity = '0';
        element.style.transform = 'translateY(30px)';
        element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        fadeObserver.observe(element);
    });

    // ========== CONTACT FORM FUNCTIONALITY ==========
    const contactForm = document.querySelector('#contact form');
    if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = {
                name: formData.get('name'),
                email: formData.get('email'),
                subject: formData.get('subject'),
                message: formData.get('message')
            };

            // Simple validation
            if (!data.name || !data.email || !data.message) {
                alert('يرجى ملء جميع الحقول المطلوبة');
                return;
            }

            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(data.email)) {
                alert('يرجى إدخال بريد إلكتروني صحيح');
                return;
            }

            // Simulate form submission
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'جاري الإرسال...';
            submitBtn.disabled = true;

            setTimeout(() => {
                submitBtn.textContent = 'تم الإرسال !';
                submitBtn.classList.add('bg-green-600');
                submitBtn.classList.remove('bg-[#432d17]');
                this.reset();
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                    submitBtn.classList.remove('bg-green-600');
                    submitBtn.classList.add('bg-[#432d17]');
                }, 3000);
            }, 2000);
        });
    }

    // ========== SCROLL TO TOP FUNCTIONALITY ==========
    const scrollToTopBtn = document.createElement('button');
    scrollToTopBtn.className = 'fixed bottom-6 left-6 bg-[#00a17d] text-white w-12 h-12 rounded-full shadow-lg hover:bg-[#00a17d]/80 transition-all duration-300 z-50 scroll-to-top';
    scrollToTopBtn.innerHTML = '<i class="fas fa-chevron-up"></i>';
    scrollToTopBtn.style.display = 'none';
    document.body.appendChild(scrollToTopBtn);

    scrollToTopBtn.addEventListener('click', function() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
            scrollToTopBtn.style.display = 'flex';
            scrollToTopBtn.style.alignItems = 'center';
            scrollToTopBtn.style.justifyContent = 'center';
        } else {
            scrollToTopBtn.style.display = 'none';
        }
    });

    // ========== SMOOTH SCROLLING FOR ANCHOR LINKS ==========
    const anchorLinks = document.querySelectorAll('a[href^="#"]');
    anchorLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // ========== SERVICE CARDS INTERACTIONS ==========
    const serviceCards = document.querySelectorAll('.hero-content .grid > div, .grid.grid-cols-2.md\\:grid-cols-4.lg\\:grid-cols-6 > div');
    serviceCards.forEach(card => {
        card.addEventListener('click', function() {
            const serviceName = this.querySelector('h3').textContent;
            alert(`سيتم توجيهكم إلى صفحة ${serviceName} قريباً`);
        });
    });

    // ========== ACCESSIBILITY ENHANCEMENTS ==========
    
    // Keyboard navigation for dropdowns
    dropdowns.forEach(dropdown => {
        const button = dropdown.querySelector('button');
        const links = dropdown.querySelectorAll('a');
        
        button.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                this.click();
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                const content = dropdown.querySelector('.dropdown-content');
                if (content.style.display === 'block') {
                    const firstLink = content.querySelector('a');
                    if (firstLink) firstLink.focus();
                }
            }
        });

        links.forEach((link, index) => {
            link.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    const nextLink = links[index + 1];
                    if (nextLink) nextLink.focus();
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    const prevLink = links[index - 1];
                    if (prevLink) {
                        prevLink.focus();
                    } else {
                        button.focus();
                    }
                } else if (e.key === 'Escape') {
                    dropdown.querySelector('.dropdown-content').style.display = 'none';
                    button.setAttribute('aria-expanded', 'false');
                    button.focus();
                }
            });
        });
    });

    // ========== MOBILE MENU DROPDOWN FUNCTIONALITY ==========
    const mobileDropdowns = document.querySelectorAll('.mobile-dropdown');
    mobileDropdowns.forEach(drop => {
        const btn = drop.querySelector('button');
        const content = drop.querySelector('.mobile-dropdown-content');
        
        // Handle dropdown button click (show/hide dropdown within mobile menu)
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Close other dropdowns
            mobileDropdowns.forEach(other => {
                if (other !== drop) {
                    other.querySelector('.mobile-dropdown-content').classList.add('hidden');
                }
            });
            
            // Toggle current dropdown
            content.classList.toggle('hidden');
        });
        
        // Handle clicks on dropdown links (close mobile menu)
        const dropdownLinks = content.querySelectorAll('a');
        dropdownLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                // Close mobile menu when a dropdown link is clicked
                mobileMenu.classList.add('hidden');
                const icon = mobileMenuBtn.querySelector('i');
                icon.classList.add('fa-bars');
                icon.classList.remove('fa-times');
                
                // Hide all dropdowns
                mobileDropdowns.forEach(dropdown => {
                    dropdown.querySelector('.mobile-dropdown-content').classList.add('hidden');
                });
            });
        });
    });

    // ========== MOBILE MENU REGULAR LINKS ==========
    const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');
    mobileMenuLinks.forEach(link => {
        link.addEventListener('click', function() {
            // Close mobile menu when regular link is clicked
            mobileMenu.classList.add('hidden');
            const icon = mobileMenuBtn.querySelector('i');
            icon.classList.add('fa-bars');
            icon.classList.remove('fa-times');
        });
    });

    // ========== PERFORMANCE OPTIMIZATIONS ==========
    
    // Lazy loading for images (if supported)
    if ('IntersectionObserver' in window) {
        const lazyImages = document.querySelectorAll('img[data-src]');
        const imageObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    img.src = img.dataset.src;
                    img.classList.remove('lazy');
                    imageObserver.unobserve(img);
                }
            });
        });

        lazyImages.forEach(img => imageObserver.observe(img));
    }

    // ========== ERROR HANDLING ==========
    window.addEventListener('error', function(e) {
        console.error('JavaScript Error:', e.error);
        // Could send error to logging service here
    });

    // ========== INITIALIZATION COMPLETE ==========
    
    // Initialize news page if we're on news page
    if (document.getElementById('news-grid')) {
        initNewsPage();
        
        // Set up read more functionality
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('read-more-btn')) {
                e.preventDefault();
                const card = e.target.closest('.news-card');
                const excerpt = card.querySelector('.news-excerpt');
                const fullText = card.querySelector('.news-full');
                if (!fullText) return;
                
                if (fullText.classList.contains('hidden')) {
                    excerpt.classList.add('hidden');
                    fullText.classList.remove('hidden');
                    e.target.innerHTML = '<i class="fas fa-minus ml-1"></i>اقرأ أقل';
                } else {
                    fullText.classList.add('hidden');
                    excerpt.classList.remove('hidden');
                    e.target.innerHTML = '<i class="fas fa-plus ml-1"></i>اقرأ المزيد';
                }
            }
        });
        
        // Add fade-in animation to news cards
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        });

        // Observe news cards for animation (with retry mechanism)
        function observeNewsCards() {
            const newsCards = document.querySelectorAll('.news-card');
            if (newsCards.length > 0) {
                newsCards.forEach(card => observer.observe(card));
            } else {
                // Retry if cards haven't loaded yet
                setTimeout(observeNewsCards, 200);
            }
        }
        setTimeout(observeNewsCards, 100);
    }
    
    // Dispatch custom event to indicate site is ready
    const siteReadyEvent = new CustomEvent('siteReady', {
        detail: { message: 'الموقع جاهز للاستخدام' }
    });
    document.dispatchEvent(siteReadyEvent);
});

// ========== UTILITY FUNCTIONS ==========

// Function to format numbers in Arabic
function formatArabicNumber(number) {
    return number.toString().replace(/\d/g, function(d) {
        return '٠١٢٣٤٥٦٧٨٩'[d];
    });
}

// Function to handle RTL text direction
function handleRTL() {
    document.documentElement.setAttribute('dir', 'rtl');
    document.documentElement.setAttribute('lang', 'ar');
}

// Function to detect if user prefers reduced motion
function respectsReducedMotion() {
    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;
}

// Apply reduced motion preferences
if (respectsReducedMotion()) {
    const style = document.createElement('style');
    style.textContent = `
        *, *::before, *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    `;
    document.head.appendChild(style);
}

// ========== NEWS PAGE FUNCTIONALITY ==========

// Load news from database and return them (don't display here)
async function loadNewsFromDatabase() {
    try {
        const savedNews = await databaseService.getAllNews();
        console.log('News fetched from database:', savedNews);
        console.log('News count:', savedNews?.length || 0);
        
        return savedNews || [];
    } catch (error) {
        console.error('Error loading news from database:', error);
        return [];
    }
}

// Function to display news
function displayNews(news) {
    const newsGrid = document.getElementById('news-grid');
    
    if (news.length === 0) {
        newsGrid.innerHTML = `
            <div class="col-span-full text-center py-16">
                <i class="fas fa-newspaper text-gray-400 text-6xl mb-4"></i>
                <h3 class="text-2xl text-gray-600 mb-2">لا توجد أخبار متاحة</h3>
                <p class="text-gray-500">سيتم عرض الأخبار هنا عند إضافتها من لوحة التحكم</p>
            </div>
        `;
        return;
    }
    
    newsGrid.innerHTML = news.map(newsItem => {
        const TEXT_LIMIT = 150; // Character limit for excerpt
        const mainText = newsItem.mainText || '';
        const needsReadMore = mainText.length > TEXT_LIMIT;
        const excerptText = needsReadMore ? mainText.substring(0, TEXT_LIMIT) + '...' : mainText;
        
        return `
            <article class="news-card ${newsItem.category || 'latest'} bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 fade-in">
                <img src="${newsItem.image}" alt="${newsItem.title}" class="w-full h-48 object-cover">
                <div class="p-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">${newsItem.title}</h3>
                    <p class="text-gray-600 mb-4 news-excerpt">${excerptText}</p>
                    ${needsReadMore ? `
                        <p class="text-gray-600 mb-4 news-full hidden">${mainText}</p>
                    ` : ''}
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-500">${formatDate(newsItem.date)}</span>
                        ${needsReadMore ? '<button class="read-more-btn bg-[#00a17d] text-white px-4 py-2 rounded-lg hover:bg-[#00a17d]/80 transition-colors"><i class="fas fa-plus ml-1"></i>اقرأ المزيد</button>' : ''}
                    </div>
                </div>
            </article>
        `;
    }).join('');
    
    // Re-trigger animations for new cards
    setTimeout(() => {
        const newsCards = document.querySelectorAll('.news-card');
        newsCards.forEach((card, index) => {
            card.classList.remove('visible');
            setTimeout(() => {
                card.classList.add('visible');
            }, index * 100); // Stagger animation
        });
    }, 50);
}

// Format date helper
function formatDate(dateString) {
    const date = new Date(dateString);
    const months = ['يناير','فبراير','مارس','ابريل','مايو','يونيو','يوليو','اغسطس','سبتمبر','اكتوبر','نوفمبر','ديسمبر'];
    return `${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;
}

// Helper: Get date from news item
function getItemDate(item) {
    return new Date(item.date);
}

// Helper: Shuffle array (Fisher-Yates algorithm)
function shuffleArray(array) {
    if (!array || array.length === 0) return [];
    
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
}

// Initialize news and set up filters
let newsData = [];

async function initNewsPage() {
    try {
        // Show loading state
        const newsGrid = document.getElementById('news-grid');
        newsGrid.innerHTML = `
            <div class="col-span-full text-center py-16">
                <i class="fas fa-spinner fa-spin text-gray-400 text-6xl mb-4"></i>
                <h3 class="text-2xl text-gray-600 mb-2">جاري تحميل الأخبار...</h3>
                <p class="text-gray-500">يرجى الانتظار</p>
            </div>
        `;

        newsData = await loadNewsFromDatabase();
        console.log('Loaded news data:', newsData, 'Count:', newsData.length);
        
        // Show filter buttons
        const filterButtons = document.querySelectorAll('.news-filter-btn');
        filterButtons.forEach(button => {
            button.style.display = 'inline-flex';
        });
        
        // Show the filter container
        const filterContainer = document.querySelector('.flex.justify-center.mb-8');
        if (filterContainer) {
            filterContainer.style.display = 'flex';
        }
        
        // Set up filter button functionality
        setupFilterButtons();
        
        // Set "Latest" as default and display news
        const latestButton = document.getElementById('filter-latest');
        if (latestButton) {
            // Activate latest button by default
            document.querySelectorAll('.news-filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-[#00a17d]', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            latestButton.classList.add('active', 'bg-[#00a17d]', 'text-white');
            latestButton.classList.remove('bg-gray-200', 'text-gray-700');
            
            // Sort all news by date (latest first) and display
            const sortedNews = [...newsData].sort((a, b) => {
                return getItemDate(b) - getItemDate(a);
            });
            displayNews(sortedNews);
        } else {
            // Fallback: just display all news if no button found
            displayNews(newsData);
        }
    } catch (error) {
        console.error('Error initializing news page:', error);
        const newsGrid = document.getElementById('news-grid');
        newsGrid.innerHTML = `
            <div class="col-span-full text-center py-16">
                <i class="fas fa-exclamation-triangle text-red-400 text-6xl mb-4"></i>
                <h3 class="text-2xl text-red-600 mb-2">خطأ في تحميل الأخبار</h3>
                <p class="text-gray-500 mb-4">تعذر الاتصال بقاعدة البيانات</p>
                <button onclick="initNewsPage()" class="bg-[#00a17d] text-white px-6 py-3 rounded-lg hover:bg-[#00c59e] transition-colors">
                    <i class="fas fa-refresh ml-2"></i>
                    إعادة المحاولة
                </button>
            </div>
        `;
    }
}

function setupFilterButtons() {
    const latestButton = document.getElementById('filter-latest');
    const chosenButton = document.getElementById('filter-chosen');
    
    [latestButton, chosenButton].forEach(button => {
        if (button) {
            button.addEventListener('click', function() {
                // Remove active class from all buttons
                document.querySelectorAll('.news-filter-btn').forEach(btn => {
                    btn.classList.remove('active', 'bg-[#00a17d]', 'text-white');
                    btn.classList.add('bg-gray-200', 'text-gray-700');
                });
                
                // Add active class to clicked button
                this.classList.add('active', 'bg-[#00a17d]', 'text-white');
                this.classList.remove('bg-gray-200', 'text-gray-700');
                
                // Filter and display news
                if (this.id === 'filter-latest') {
                    // Sort by date (latest first)
                    const sortedNews = [...newsData].sort((a, b) => {
                        return getItemDate(b) - getItemDate(a);
                    });
                    displayNews(sortedNews);
                } else if (this.id === 'filter-chosen') {
                    // Shuffle all available news for "chosen for you"
                    console.log('Shuffling news for chosen filter, original count:', newsData.length);
                    const shuffledNews = shuffleArray([...newsData]);
                    console.log('Shuffled news count:', shuffledNews.length);
                    displayNews(shuffledNews);
                }
            });
        }
    });
}


    </script>
</body>
</html>